"use strict";(self.webpackChunkorderapp=self.webpackChunkorderapp||[]).push([[119,981],{2007:(y,l,n)=>{n.d(l,{h:()=>m});var s=n(3664),_=n(9417),p=n(152),h=n(2615);function I(d,o){if(1&d){const u=s.RV6();s.j41(0,"button",4),s.bIt("click",function(){const e=h.eBV(u).$implicit,t=s.XpG();return h.Njj(t.shortCutClicked(e))}),s.EFF(1),s.k0s()}if(2&d){const u=o.$implicit;s.R7$(),s.SpI(" ",u," ")}}let m=(()=>{var d;class o{constructor(){this.noteChangeEmitter=new s.bkB,this.noteSuggestions=[],this.note="",this.noteFormControl=new _.MJ(""),this.noteSubscription=this.noteFormControl.valueChanges.pipe((0,p.B)(300)).subscribe(r=>{this.noteChangeEmitter.emit(r??"")})}ngOnInit(){this.note&&this.noteFormControl.setValue(this.note)}shortCutClicked(r){const e=this.noteFormControl.value;this.noteFormControl.setValue(e?e+", "+r:r)}ngOnDestroy(){console.log("Destroying notes component and subscription"),this.noteSubscription.unsubscribe()}static#e=d=()=>(this.\u0275fac=function(e){return new(e||o)},this.\u0275cmp=s.VBU({type:o,selectors:[["lib-cart-item-note"]],inputs:{noteSuggestions:"noteSuggestions",note:"note"},outputs:{noteChangeEmitter:"noteChangeEmitter"},decls:6,vars:1,consts:[[1,"flex","gap-4","mb-3"],["type","text","placeholder","Enter notes...",1,"rounded-md","flex-1","bg-zinc-200","w-full","p-2","ring-zinc-700",3,"formControl"],[1,"flex","flex-wrap","gap-4"],[1,"bg-gray-100","p-2","rounded-lg","border"],[1,"bg-gray-100","p-2","rounded-lg","border",3,"click"]],template:function(e,t){1&e&&(s.j41(0,"div")(1,"div",0),s.nrm(2,"input",1),s.k0s(),s.j41(3,"div",2),s.Z7z(4,I,2,1,"button",3,s.fX1),s.k0s()()),2&e&&(s.R7$(2),s.Y8G("formControl",t.noteFormControl),s.R7$(2),s.Dyx(t.noteSuggestions))},dependencies:[_.X1,_.me,_.BC,_.l_],encapsulation:2}))}return d(),o})()},2774:(y,l,n)=>{n.d(l,{T:()=>o});var s=n(1413),_=n(8141),p=n(152),h=n(5964),I=n(6354),m=n(7035);class o{_letterKeyStream=new s.B;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new s.B;selectedItem=this._selectedItem;constructor(r,e){const t="number"==typeof e?.debounceInterval?e.debounceInterval:200;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(r),this._setupKeyHandler(t)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(r){this._selectedItemIndex=r}setItems(r){this._items=r}handleKey(r){const e=r.keyCode;r.key&&1===r.key.length?this._letterKeyStream.next(r.key.toLocaleUpperCase()):(e>=m.A&&e<=m.Z||e>=m.b&&e<=m.N)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(r){this._letterKeyStream.pipe((0,_.M)(e=>this._pressedLetters.push(e)),(0,p.B)(r),(0,h.p)(()=>this._pressedLetters.length>0),(0,I.T)(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let t=1;t<this._items.length+1;t++){const a=this._items[(this._selectedItemIndex+t)%this._items.length];if(!this._skipPredicateFn?.(a)&&0===a.getLabel?.().toLocaleUpperCase().trim().indexOf(e)){this._selectedItem.next(a);break}}this._pressedLetters=[]})}}},3981:(y,l,n)=>{n.d(l,{F:()=>_});var s=n(8070);class _ extends s.L{_origin="program";setFocusOrigin(h){return this._origin=h,this}setActiveItem(h){super.setActiveItem(h),this.activeItem&&this.activeItem.focus(this._origin)}}},8070:(y,l,n)=>{n.d(l,{L:()=>u});var s=n(2615),_=n(3664),p=n(3597),h=n(8359),I=n(1413),m=n(2774),d=n(7336),o=n(7035);class u{_items;_activeItemIndex=(0,s.vPA)(-1);_activeItem=(0,s.vPA)(null);_wrap=!1;_typeaheadSubscription=h.yU.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof _.rOR?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):(0,s.Hps)(e)&&(this._effectRef=(0,p.QZ)(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new I.B;change=new I.B;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();const t=this._getItemsArray();return this._typeahead=new m.T(t,{debounceInterval:"number"==typeof e?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex())}onKeydown(e){const t=e.keyCode,a=["altKey","ctrlKey","metaKey","shiftKey"].every(c=>!e[c]||this._allowedModifierKeys.indexOf(c)>-1);switch(t){case o.T:return void this.tabOut.next();case o.D:if(this._vertical&&a){this.setNextItemActive();break}return;case o.U:if(this._vertical&&a){this.setPreviousItemActive();break}return;case o.R:if(this._horizontal&&a){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case o.L:if(this._horizontal&&a){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case o.H:if(this._homeAndEnd&&a){this.setFirstItemActive();break}return;case o.E:if(this._homeAndEnd&&a){this.setLastItemActive();break}return;case o.a:if(this._pageUpAndDown.enabled&&a){const c=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(c>0?c:0,1);break}return;case o.P:if(this._pageUpAndDown.enabled&&a){const c=this._activeItemIndex()+this._pageUpAndDown.delta,v=this._getItemsArray().length;this._setActiveItemByIndex(c<v?c:v-1,-1);break}return;default:return void((a||(0,d.rp)(e,"shiftKey"))&&this._typeahead?.handleKey(e))}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem.set(t[i]??null),this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const a=(this._activeItemIndex()+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[a]))return void this.setActiveItem(a)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex()+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return(0,s.Hps)(this._items)?this._items():this._items instanceof _.rOR?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);const t=this._activeItem();if(t){const i=e.indexOf(t);i>-1&&i!==this._activeItemIndex()&&(this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i))}}}}}]);