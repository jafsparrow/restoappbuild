"use strict";(self.webpackChunkorderapp=self.webpackChunkorderapp||[]).push([[25],{491:(M,g,d)=>{d.d(g,{Ej:()=>T,eW:()=>P});var m=d(2200),u=d(142),l=d(9055),r=d(4915),f=d(3974),v=d(3841),F=d(8610),x=d(8132),e=d(3664),c=d(2615),_=d(9640);function C(i,s){if(1&i&&(e.rj2(0,"div",17)(1,"span",24),e.EFF(2),e.eux()()),2&i){const n=e.XpG(2).$implicit;e.R7$(2),e.JRh(n.modifiers)}}function k(i,s){if(1&i){const n=e.RV6();e.rj2(0,"div",3)(1,"div",4)(2,"div",5),e.VwU("click",function(){c.eBV(n);const o=e.XpG().$implicit,a=e.XpG(2),p=e.XpG();return c.Njj(p.deleteFromOrder(a,o))}),c.qSk(),e.rj2(3,"svg",6),e.Hgh(4,"g",7)(5,"g",8),e.rj2(6,"g",9),e.Hgh(7,"path",10)(8,"path",11)(9,"path",12)(10,"path",13)(11,"path",14),e.eux()()()(),c.joV(),e.rj2(12,"div",15)(13,"div",16),e.EFF(14),e.eux(),e.nVh(15,C,3,1,"div",17),e.Hgh(16,"div",18),e.eux(),e.rj2(17,"div",19)(18,"div",20)(19,"button",21),e.VwU("click",function(){c.eBV(n);const o=e.XpG().$implicit,a=e.XpG(2),p=e.XpG();return c.Njj(p.decrimentItem(o,a))}),e.EFF(20," - "),e.eux(),e.rj2(21,"div",22),e.EFF(22),e.eux(),e.rj2(23,"button",21),e.VwU("click",function(){c.eBV(n);const o=e.XpG().$implicit,a=e.XpG(2),p=e.XpG();return c.Njj(p.incrementItem(o,a))}),e.EFF(24," + "),e.eux()(),e.rj2(25,"div",23),e.EFF(26),e.nI1(27,"decimalpointpipe"),e.eux()()()}if(2&i){const n=e.XpG().$implicit;e.R7$(14),e.SpI(" ",n.name," "),e.R7$(),e.vxM(n.modifiers?15:-1),e.R7$(7),e.SpI(" ",n.count," "),e.R7$(4),e.SpI(" ",e.bMT(27,4,n.count*n.amount)," ")}}function O(i,s){if(1&i&&(e.rj2(0,"div"),e.nVh(1,k,28,6,"div",3),e.eux()),2&i){const n=s.$implicit;e.R7$(),e.vxM(n.count?1:-1)}}function h(i,s){1&i&&(e.rj2(0,"div",1)(1,"div",2),e.Z7z(2,O,2,1,"div",null,e.fX1),e.eux()()),2&i&&(e.R7$(2),e.Dyx(s.orderItems))}function I(i,s){if(1&i&&(e.iHH(0,0),e.nVh(1,h,4,0,"div",1),e.nI1(2,"async"),e.Zht()),2&i){let n;const t=e.XpG();e.R7$(),e.vxM((n=e.bMT(2,1,t.selectOrderForEdit$))?1:-1,n)}}let T=(()=>{var i;class s{constructor(t,o){this.store=t,this.dialog=o,this.selectOrderDetailsLoadSpinner$=this.store.select(u.selectLoadOrderDetailSpinner),this.selectOrderDetailsOfSelectedOrder$=this.store.select(u.selectOrderDetailsOfSelectedOrder),this.selectOrderForEdit$=this.store.select(l.L_)}deleteFromOrder(t,o){const p=t.orderItems.filter(j=>j.customeKey==o.customeKey)[0].count;confirm(`Deleting ${o.name} from order.?`)&&(this.store.dispatch((0,l.hm)({orderItem:o,count:-p,originalCount:p})),console.log("delete pressed."))}decrimentItem(t,o){if(t.count-1<=0)return void this.deleteFromOrder(o,t);const p=o.orderItems.filter(j=>j.customeKey==t.customeKey)[0].count??0;this.store.dispatch((0,l.yT)({orderItem:t,count:-1,originalCount:p})),console.log("decrement")}incrementItem(t,o){const a=o.orderItems.filter(p=>p.customeKey==t.customeKey)[0].count??0;this.store.dispatch((0,l.yT)({orderItem:t,count:1,originalCount:a})),console.log("increment")}static#e=i=()=>(this.\u0275fac=function(o){return new(o||s)(e.rXU(_.il),e.rXU(F.h))},this.\u0275cmp=e.VBU({type:s,selectors:[["hotel-order-items-details"]],decls:2,vars:3,consts:[[1,"relative"],[1,"max-w-md","mx-auto","overflow-y-auto"],[1,"bg-white","mt-5"],[1,"border-b","flex","flex-row","py-2"],[1,"mr-2"],[1,"w-5","h-5",3,"click"],["viewBox","0 0 24 24","fill","none"],["id","SVGRepo_bgCarrier","stroke-width","1"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M10 12V17","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M14 12V17","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M4 7H20","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M6 10V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V10","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"flex-grow"],[1,"text-sm"],[1,"text-xs","font-light"],[1,"text-xs","font-thin"],[1,"flex","flex-row","justify-center","items-center"],[1,"w-full","mr-1","h-6","flex","flex-row","justify-between","items-center","text-xs","font-bold","bg-gray-200","p-1","rounded-lg","basis-0"],[1,"w-4","h-4","font-bold","text-lg","flex","justify-center","items-center",3,"click"],[1,"px-2","flex-grow","text-center","text-sm"],[1,"w-16","text-sm","font-light","text-right"],[1,"ml-2"]],template:function(o,a){if(1&o&&(e.nVh(0,I,3,3,"ng-container",0),e.nI1(1,"async")),2&o){let p;e.vxM((p=e.bMT(1,1,a.selectOrderDetailsOfSelectedOrder$))?0:-1,p)}},dependencies:[m.MD,m.Jj,f.Yy],encapsulation:2}))}return i(),s})();var E=d(4731),y=d(7589);function $(i,s){1&i&&(e.j41(0,"div",1),e.EFF(1," Loading.... "),e.k0s())}function D(i,s){if(1&i&&(e.j41(0,"div",14),e.nrm(1,"div",15),e.j41(2,"div",16),e.EFF(3),e.k0s(),e.j41(4,"div",16),e.EFF(5),e.nI1(6,"decimalpointpipe"),e.k0s()()),2&i){const n=s.$implicit;e.R7$(3),e.JRh(n.taxName),e.R7$(2),e.JRh(e.bMT(6,2,n.value))}}function b(i,s){1&i&&(e.j41(0,"div"),c.qSk(),e.j41(1,"svg",19),e.nrm(2,"path",20)(3,"path",21),e.k0s(),c.joV(),e.j41(4,"span",22),e.EFF(5,"Loading..."),e.k0s()())}function R(i,s){if(1&i){const n=e.RV6();e.j41(0,"div",24),e.bIt("click",function(){c.eBV(n);const o=e.XpG(2),a=e.XpG(4);return c.Njj(a.updateOrder(o))}),e.EFF(1," UPDATE "),e.k0s()}}function V(i,s){if(1&i&&(e.nVh(0,R,2,0,"div",23),e.nI1(1,"async")),2&i){const n=e.XpG(5);e.vxM(!0===e.bMT(1,1,n.selectHasOrderEditHasItems$)?0:-1)}}function B(i,s){if(1&i){const n=e.RV6();e.j41(0,"div",17),e.nVh(1,b,6,0,"div"),e.nI1(2,"async"),e.vZN(3,V,2,3),e.j41(4,"div",18),e.bIt("click",function(){c.eBV(n);const o=e.XpG(2),a=e.XpG(),p=e.XpG();return c.Njj(p.addNewItemsToTheOrder(o,a))}),e.EFF(5," ADD MORE "),e.k0s()()}if(2&i){const n=e.XpG(4);e.R7$(),e.vxM(!0===e.bMT(2,1,n.selectPlaceOrderSpinner$)?1:3)}}function S(i,s){if(1&i&&(e.j41(0,"div",3)(1,"div",4)(2,"div",5),e.EFF(3),e.k0s(),e.j41(4,"div",6),e.EFF(5),e.nI1(6,"timesago"),e.k0s(),e.nrm(7,"div",7),e.j41(8,"div",8),e.EFF(9),e.nI1(10,"decimalpointpipe"),e.k0s()(),e.j41(11,"div",9)(12,"div",7)(13,"div",10),e.EFF(14," Type: "),e.j41(15,"span",11),e.EFF(16),e.k0s()(),e.j41(17,"div",12),e.EFF(18,"Table 22"),e.k0s(),e.j41(19,"div",12),e.EFF(20),e.k0s()()(),e.nrm(21,"hr")(22,"hotel-order-items-details")(23,"div",13),e.j41(24,"div",14),e.nrm(25,"div",15),e.j41(26,"div",16),e.EFF(27,"Bill Total"),e.k0s(),e.j41(28,"div",16),e.EFF(29),e.nI1(30,"decimalpointpipe"),e.k0s()(),e.Z7z(31,D,7,4,"div",14,e.fX1),e.j41(33,"div",14),e.nrm(34,"div",15),e.j41(35,"div",16),e.EFF(36,"Net Total"),e.k0s(),e.j41(37,"div",16),e.EFF(38),e.nI1(39,"decimalpointpipe"),e.k0s()(),e.nVh(40,B,6,3,"div",17),e.nI1(41,"async"),e.k0s()),2&i){let n;const t=s,o=e.XpG(3);e.R7$(3),e.SpI(" Order - ",t.orderNumber," "),e.R7$(2),e.SpI(" ",e.bMT(6,8,t.createdAt)," "),e.R7$(4),e.SpI(" ",e.bMT(10,10,t.totalAmount)," "),e.R7$(7),e.JRh(t.orderType),e.R7$(4),e.SpI("Customer: ",t.customerName),e.R7$(9),e.SpI(" ",e.bMT(30,12,t.totalAmount)," "),e.R7$(2),e.Dyx(t.appliedTaxes),e.R7$(7),e.SpI(" ",e.bMT(39,14,t.taxedTotal)," "),e.R7$(2),e.vxM((n=e.bMT(41,16,o.cart$))?40:-1,n)}}function X(i,s){if(1&i&&(e.qex(0,2),e.nVh(1,S,42,18,"div",3),e.nI1(2,"async"),e.bVm()),2&i){let n;const t=e.XpG(2);e.R7$(),e.vxM((n=e.bMT(2,1,t.selectOrderForEdit$))?1:-1,n)}}function w(i,s){if(1&i&&(e.j41(0,"div",0),e.nVh(1,$,2,0,"div",1),e.nI1(2,"async"),e.nVh(3,X,3,3,"ng-container",2),e.nI1(4,"async"),e.k0s()),2&i){let n;const t=e.XpG();e.R7$(),e.vxM(e.bMT(2,2,t.selectOrderDetailsLoadSpinner$)?1:-1),e.R7$(2),e.vxM((n=e.bMT(4,4,t.selectOrderDetailsOfSelectedOrder$))?3:-1,n)}}let P=(()=>{var i;class s{constructor(t,o,a){this.store=t,this.dialog=o,this.router=a,this.cart$=this.store.select(l.xk),this.selectOrderDetailsLoadSpinner$=this.store.select(u.selectLoadOrderDetailSpinner),this.selectOrderDetailsOfSelectedOrder$=this.store.select(u.selectOrderDetailsOfSelectedOrder),this.selectOrderForEdit$=this.store.select(l.L_),this.selectPlaceOrderSpinner$=this.store.select(u.selectPlaceOrderSpinner),this.selectSignedUser$=this.store.select(E.Y6),this.selectHasOrderEditHasItems$=this.store.select(l.rJ),this.isNavigatingToHomeToAddMoreItems=!1}ngOnDestroy(){this.isNavigatingToHomeToAddMoreItems||this.store.dispatch((0,l.sX)())}makeBillForOrder(t){console.log("clicked makebill button"),this.store.dispatch((0,u.makeBillForOrder)({orderId:t.id})),this.dialog.open(v.r,{width:"100%"})}makePayment(t){return"hello"}printBill(t){return console.log("clicked printbill button"),this.store.dispatch((0,u.makeBillForOrder)({orderId:t.id})),"hello"}updateOrder(t){console.log("updating order"),this.store.dispatch((0,u.placeOrder)({cart:t})),this.dialog.closeAll()}addNewItemsToTheOrder(t,o){if(!this.canUserAddNewOrder(t,o)||!t.customer)return;this.isNavigatingToHomeToAddMoreItems=!0;const a=t.customer;this.store.dispatch((0,l.hc)({user:{firstName:a.firstName,lastName:a.lastName,userType:t.orderType==r.ut.TABLE?r.ut.TABLE:r.ut.TAKEAWAY},tableId:t.tableId?t.tableId:0,customerId:a?a.id:0,existingOrderId:t.id})),this.dialog.closeAll(),this.router.navigate(["shell/home"])}canUserAddNewOrder(t,o){return!(!o.isCashier&&t.createdUserId!==o.id)}static#e=i=()=>(this.\u0275fac=function(o){return new(o||s)(e.rXU(_.il),e.rXU(F.h),e.rXU(y.Ix))},this.\u0275cmp=e.VBU({type:s,selectors:[["hotel-orderapp-order-feature-order-edit"]],decls:2,vars:3,consts:[[1,"p-4"],[1,"h-screen","flex","items-center","justify-center"],[1,"relative"],[1,"p-2","max-w-lg","min-w-fit","mx-auto","pt-5","overflow-y-auto","border"],[1,"flex","w-full","flex-row","items-stretch"],[1,"font-bold","capitalize"],[1,"ml-2","border-l-2","pl-2","font-light"],[1,"flex-grow"],[1,"font-semibold"],[1,"flex","flex-row"],[1,"font-semibod"],[1,"font-light"],[1,"font-thin"],[1,"my-2","h-[1px]","w-full","bg-gray-600"],[1,"grid","grid-cols-4","pt-2"],[1,"col-span-2"],[1,"col-span-1"],[1,"text-center","mt-2"],[1,"inline-block","bg-green-400","px-2","py-1","rounded-md","text-right","cursor-pointer",3,"click"],["aria-hidden","true","viewBox","0 0 100 101","fill","none",1,"w-8","h-8","mr-2","text-gray-200","animate-spin","dark:text-gray-600","fill-blue-600"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"],[1,"bg-pink-500","px-2","py-1","mr-3","text-white","font-semibold","text-center","hover:cursor-pointer","rounded-md","inline-block","mx-auto"],[1,"bg-pink-500","px-2","py-1","mr-3","text-white","font-semibold","text-center","hover:cursor-pointer","rounded-md","inline-block","mx-auto",3,"click"]],template:function(o,a){if(1&o&&(e.nVh(0,w,5,6,"div",0),e.nI1(1,"async")),2&o){let p;e.vxM((p=e.bMT(1,1,a.selectSignedUser$))?0:-1,p)}},dependencies:[m.MD,F.l,x.iI,T,m.Jj,f.Ec,f.Yy],encapsulation:2}))}return i(),s})()},3691:(M,g,d)=>{d.d(g,{D:()=>r});var m=d(8610),u=d(8834),l=d(3664);let r=(()=>{var f;class v{constructor(x,e){this.dialogRef=x,this.data=e}static#e=f=()=>(this.\u0275fac=function(e){return new(e||v)(l.rXU(m.k),l.rXU(m.e))},this.\u0275cmp=l.VBU({type:v,selectors:[["hotel-confirmation-dialog"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","mat-dialog-close","yes","cdkFocusInitial","","color","primary"]],template:function(e,c){1&e&&(l.j41(0,"h1",0),l.EFF(1),l.k0s(),l.j41(2,"div",1),l.EFF(3),l.k0s(),l.j41(4,"div",2)(5,"button",3),l.EFF(6,"No"),l.k0s(),l.j41(7,"button",4),l.EFF(8),l.k0s()()),2&e&&(l.R7$(),l.JRh(c.data.title),l.R7$(2),l.JRh(c.data.content),l.R7$(5),l.SpI(" ",c.data.okBtnText," "))},dependencies:[u.Hl,u.$z,m.l,m.a,m.b,m.M,m.c],encapsulation:2}))}return f(),v})()},3841:(M,g,d)=>{d.d(g,{r:()=>c});var m=d(2200),u=d(8610),l=d(142),r=d(3664),f=d(9640);function v(_,C){1&_&&(r.rj2(0,"div",1)(1,"div"),r.EFF(2,"Printing in Progress...."),r.eux()())}function F(_,C){1&_&&(r.rj2(0,"div",1)(1,"div"),r.EFF(2,"Bill Printed successfully"),r.eux()())}function x(_,C){1&_&&(r.rj2(0,"div",1)(1,"div"),r.EFF(2,"Bill Priting failed"),r.eux()())}function e(_,C){if(1&_&&(r.nVh(0,F,3,0,"div",1),r.nI1(1,"async"),r.nVh(2,x,3,0,"div",1),r.nI1(3,"async")),2&_){let k,O;const h=r.XpG();r.vxM(null!=(k=r.bMT(1,2,h.selectMakeBillMessages$))&&k.successMessage?0:-1),r.R7$(2),r.vxM(null!=(O=r.bMT(3,4,h.selectMakeBillMessages$))&&O.failedMessage?2:-1)}}let c=(()=>{var _;class C{constructor(O,h){this.store=O,this.dialog=h,this.selectMakeBillSpinner$=this.store.select(l.selectMakeBillSpinner),this.selectMakeBillMessages$=this.store.select(l.selectMakeBillMessages)}closeDialog(){this.dialog.closeAll()}static#e=_=()=>(this.\u0275fac=function(h){return new(h||C)(r.rXU(f.il),r.rXU(u.h))},this.\u0275cmp=r.VBU({type:C,selectors:[["hotel-orderapp-order-feature-print-progress"]],decls:7,vars:3,consts:[[1,"bg-gray-100","p-2"],[1,"flex","justify-center","items-center","h-64"],[1,"bg-gray-700","text-white","max-w-sm","mx-auto","text-center","py-1","rounded-md","cursor-pointer",3,"click"]],template:function(h,I){1&h&&(r.rj2(0,"div",0),r.nVh(1,v,3,0,"div",1),r.nI1(2,"async"),r.vZN(3,e,4,6),r.rj2(4,"div")(5,"div",2),r.VwU("click",function(){return I.closeDialog()}),r.EFF(6," OK "),r.eux()()()),2&h&&(r.R7$(),r.vxM(!0===r.bMT(2,1,I.selectMakeBillSpinner$)?1:3))},dependencies:[m.MD,u.l,m.Jj],encapsulation:2}))}return _(),C})()}}]);