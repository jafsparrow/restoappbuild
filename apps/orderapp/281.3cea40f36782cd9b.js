"use strict";(self.webpackChunkorderapp=self.webpackChunkorderapp||[]).push([[281],{9213:(C,h,o)=>{o.d(h,{WX:()=>I,z1:()=>b});var _=o(6814),d=o(8866),c=o(8995),r=o(1528),x=o(3317),u=o(1963),Z=o(9347),g=o(7850),e=o(9212),f=o(4221);function a(i,l){if(1&i&&(e.TgZ(0,"div",28)(1,"span",29),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(t.modifiers)}}function T(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"div",9),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,m=e.oxw(2).ngIf,A=e.oxw();return e.KtG(A.deleteFromOrder(m,s))}),e.O4$(),e.TgZ(3,"svg",10),e._UZ(4,"g",11)(5,"g",12),e.TgZ(6,"g",13),e._UZ(7,"path",14)(8,"path",15)(9,"path",16)(10,"path",17)(11,"path",18),e.qZA()()()(),e.kcU(),e.TgZ(12,"div",19)(13,"div",20),e._uU(14),e.qZA(),e.YNc(15,a,3,1,"div",21),e._UZ(16,"div",22),e.qZA(),e.TgZ(17,"div",23)(18,"div",24)(19,"button",25),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,m=e.oxw(3);return e.KtG(m.decrimentItem(s))}),e._uU(20," - "),e.qZA(),e.TgZ(21,"div",26),e._uU(22),e.qZA(),e.TgZ(23,"button",25),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,m=e.oxw(3);return e.KtG(m.incrementItem(s))}),e._uU(24," + "),e.qZA()(),e.TgZ(25,"div",27),e._uU(26),e.ALo(27,"decimalpointpipe"),e.qZA()()()}if(2&i){const t=e.oxw().$implicit;e.xp6(14),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.modifiers),e.xp6(7),e.hij(" ",t.count," "),e.xp6(4),e.hij(" ",e.lcZ(27,4,t.count*t.amount)," ")}}function v(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,T,28,6,"div",6),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.count)}}function p(i,l){if(1&i&&(e.TgZ(0,"div",3)(1,"div",4),e.YNc(2,v,2,1,"div",5),e.qZA()()),2&i){const t=l.ngIf;e.xp6(2),e.Q6J("ngForOf",t.orderItems)}}function O(i,l){if(1&i&&(e.ynx(0,1),e.YNc(1,p,3,1,"div",2),e.ALo(2,"async"),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.selectOrderForEdit$))}}let I=(()=>{class i{constructor(t,n){this.store=t,this.dialog=n,this.selectOrderDetailsLoadSpinner$=this.store.select(d.selectLoadOrderDetailSpinner),this.selectOrderDetailsOfSelectedOrder$=this.store.select(d.selectOrderDetailsOfSelectedOrder),this.selectOrderForEdit$=this.store.select(c.j_)}deleteFromOrder(t,n){const m=t.orderItems.filter(A=>A.customeKey==n.customeKey)[0].count;confirm(`Deleting ${n.name} from order.?`)&&(this.store.dispatch((0,c.AL)({orderItem:n,count:-m})),console.log("delete pressed."))}decrimentItem(t){t.count-1<=0||(this.store.dispatch((0,c.Jv)({orderItem:t,count:-1})),console.log("decrement"))}incrementItem(t){this.store.dispatch((0,c.Jv)({orderItem:t,count:1})),console.log("increment")}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(f.yh),e.Y36(Z.uw))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["hotel-order-items-details"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[["class","relative",4,"ngIf"],[1,"relative"],["class","max-w-md mx-auto overflow-y-auto",4,"ngIf"],[1,"max-w-md","mx-auto","overflow-y-auto"],[1,"bg-white","mt-5"],[4,"ngFor","ngForOf"],["class","border-b flex flex-row py-2",4,"ngIf"],[1,"border-b","flex","flex-row","py-2"],[1,"mr-2"],[1,"w-5","h-5",3,"click"],["viewBox","0 0 24 24","fill","none"],["id","SVGRepo_bgCarrier","stroke-width","1"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M10 12V17","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M14 12V17","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M4 7H20","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M6 10V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V10","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"flex-grow"],[1,"text-sm"],["class","text-xs font-light",4,"ngIf"],[1,"text-xs","font-thin"],[1,"flex","flex-row","justify-center","items-center"],[1,"w-full","mr-1","h-6","flex","flex-row","justify-between","items-center","text-xs","font-bold","bg-gray-200","p-1","rounded-lg","basis-0"],[1,"w-4","h-4","font-bold","text-lg","flex","justify-center","items-center",3,"click"],[1,"px-2","flex-grow","text-center","text-sm"],[1,"w-16","text-sm","font-light","text-right"],[1,"text-xs","font-light"],[1,"ml-2"]],template:function(n,s){1&n&&(e.YNc(0,O,3,3,"ng-container",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,s.selectOrderDetailsOfSelectedOrder$))},dependencies:[_.ez,_.sg,_.O5,_.Ov,x.iM]})}return i})();var y=o(9135);function w(i,l){1&i&&(e.TgZ(0,"div",3),e._uU(1," Loading.... "),e.qZA())}function D(i,l){if(1&i&&(e.TgZ(0,"div",17),e._UZ(1,"div",18),e.TgZ(2,"div",19),e._uU(3),e.qZA(),e.TgZ(4,"div",19),e._uU(5),e.qZA()()),2&i){const t=l.$implicit;e.xp6(3),e.Oqu(t.taxName),e.xp6(2),e.Oqu(t.value)}}function U(i,l){1&i&&(e.TgZ(0,"div"),e.O4$(),e.TgZ(1,"svg",26),e._UZ(2,"path",27)(3,"path",28),e.qZA(),e.kcU(),e.TgZ(4,"span",29),e._uU(5,"Loading..."),e.qZA()())}function k(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",31),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2).ngIf,m=e.oxw(4);return e.KtG(m.updateOrder(s))}),e._uU(1," UPDATE "),e.qZA()}}function F(i,l){if(1&i&&(e.YNc(0,k,2,0,"div",30),e.ALo(1,"async")),2&i){const t=e.oxw(5);e.Q6J("ngIf",!0===e.lcZ(1,1,t.selectHasOrderEditHasItems$))}}function E(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",22),e.YNc(1,U,6,0,"div",23),e.ALo(2,"async"),e.YNc(3,F,2,3,"ng-template",null,24,e.W1O),e.TgZ(5,"div",25),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2).ngIf,m=e.oxw().ngIf,A=e.oxw();return e.KtG(A.addNewItemsToTheOrder(s,m))}),e._uU(6," ADD MORE "),e.qZA()()}if(2&i){const t=e.MAs(4),n=e.oxw(4);e.xp6(1),e.Q6J("ngIf",!0===e.lcZ(2,2,n.selectPlaceOrderSpinner$))("ngIfElse",t)}}function M(i,l){if(1&i&&(e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._uU(3),e.qZA(),e.TgZ(4,"div",9),e._uU(5),e.ALo(6,"timesago"),e.qZA(),e._UZ(7,"div",10),e.TgZ(8,"div",11),e._uU(9),e.ALo(10,"decimalpointpipe"),e.qZA()(),e.TgZ(11,"div",12)(12,"div",10)(13,"div",13),e._uU(14," Type: "),e.TgZ(15,"span",14),e._uU(16),e.qZA()(),e.TgZ(17,"div",15),e._uU(18,"Table 22"),e.qZA(),e.TgZ(19,"div",15),e._uU(20),e.qZA()()(),e._UZ(21,"hotel-order-items-details")(22,"div",16),e.TgZ(23,"div",17),e._UZ(24,"div",18),e.TgZ(25,"div",19),e._uU(26,"Bill Total"),e.qZA(),e.TgZ(27,"div",19),e._uU(28),e.ALo(29,"decimalpointpipe"),e.qZA()(),e.YNc(30,D,6,2,"div",20),e.TgZ(31,"div",17),e._UZ(32,"div",18),e.TgZ(33,"div",19),e._uU(34,"Net Total"),e.qZA(),e.TgZ(35,"div",19),e._uU(36),e.qZA()(),e.YNc(37,E,7,4,"div",21),e.ALo(38,"async"),e.qZA()),2&i){const t=l.ngIf,n=e.oxw(3);e.xp6(3),e.hij(" Order - ",t.orderNumber," "),e.xp6(2),e.hij(" ",e.lcZ(6,9,t.createdAt)," "),e.xp6(4),e.hij(" ",e.lcZ(10,11,t.totalAmount)," OMR "),e.xp6(7),e.Oqu(t.orderType),e.xp6(4),e.hij("Customer: ",t.customerName,""),e.xp6(8),e.hij(" ",e.lcZ(29,13,t.totalAmount)," "),e.xp6(2),e.Q6J("ngForOf",t.appliedTaxes),e.xp6(6),e.Oqu(t.taxedTotal),e.xp6(1),e.Q6J("ngIf",e.lcZ(38,15,n.cart$))}}function N(i,l){if(1&i&&(e.ynx(0,4),e.YNc(1,M,39,17,"div",5),e.ALo(2,"async"),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.selectOrderForEdit$))}}function $(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,w,2,0,"div",1),e.ALo(2,"async"),e.YNc(3,N,3,3,"ng-container",2),e.ALo(4,"async"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,t.selectOrderDetailsLoadSpinner$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,4,t.selectOrderDetailsOfSelectedOrder$))}}let b=(()=>{class i{constructor(t,n,s){this.store=t,this.dialog=n,this.router=s,this.cart$=this.store.select(c.Gd),this.selectOrderDetailsLoadSpinner$=this.store.select(d.selectLoadOrderDetailSpinner),this.selectOrderDetailsOfSelectedOrder$=this.store.select(d.selectOrderDetailsOfSelectedOrder),this.selectOrderForEdit$=this.store.select(c.j_),this.selectPlaceOrderSpinner$=this.store.select(d.selectPlaceOrderSpinner),this.selectSignedUser$=this.store.select(y.JS),this.selectHasOrderEditHasItems$=this.store.select(c.Ux),this.isNavigatingToHomeToAddMoreItems=!1}ngOnDestroy(){this.isNavigatingToHomeToAddMoreItems||this.store.dispatch((0,c.LL)())}makeBillForOrder(t){console.log("clicked makebill button"),this.store.dispatch((0,d.makeBillForOrder)({orderId:t.id})),this.dialog.open(u.J,{width:"100%"})}makePayment(t){return"hello"}printBill(t){return console.log("clicked printbill button"),this.store.dispatch((0,d.makeBillForOrder)({orderId:t.id})),"hello"}updateOrder(t){console.log("updating order"),this.store.dispatch((0,d.placeOrder)({cart:t})),this.dialog.closeAll()}addNewItemsToTheOrder(t,n){if(!this.canUserAddNewOrder(t,n)||!t.customer)return;this.isNavigatingToHomeToAddMoreItems=!0;const s=t.customer;this.store.dispatch((0,c.mB)({user:{firstName:s.firstName,lastName:s.lastName,userType:t.orderType==r.FW.TABLE?r.FW.TABLE:r.FW.TAKEAWAY},tableId:t.tableId?t.tableId:0,customerId:s?s.id:0,existingOrderId:t.id})),this.dialog.closeAll(),this.router.navigate(["shell/home"])}canUserAddNewOrder(t,n){return!(!n.isCashier&&t.createdUserId!==n.id)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(f.yh),e.Y36(Z.uw),e.Y36(g.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["hotel-orderapp-order-feature-order-edit"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[4,"ngIf"],["class","h-screen flex items-center justify-center",4,"ngIf"],["class","relative",4,"ngIf"],[1,"h-screen","flex","items-center","justify-center"],[1,"relative"],["class","p-2 max-w-md mx-auto pt-5 overflow-y-auto border",4,"ngIf"],[1,"p-2","max-w-md","mx-auto","pt-5","overflow-y-auto","border"],[1,"flex","w-full","flex-row","items-stretch"],[1,"font-bold","capitalize"],[1,"ml-2","border-l-2","pl-2","font-light"],[1,"flex-grow"],[1,"font-semibold"],[1,"flex","flex-row"],[1,"font-semibod"],[1,"font-light"],[1,"font-thin"],[1,"my-2","h-[1px]","w-full","bg-gray-600"],[1,"grid","grid-cols-4","pt-2"],[1,"col-span-2"],[1,"col-span-1"],["class","grid grid-cols-4 pt-2",4,"ngFor","ngForOf"],["class","text-center mt-2",4,"ngIf"],[1,"text-center","mt-2"],[4,"ngIf","ngIfElse"],["actionButtons",""],[1,"inline-block","bg-green-400","px-2","py-1","rounded-md","text-right",3,"click"],["aria-hidden","true","viewBox","0 0 100 101","fill","none",1,"w-8","h-8","mr-2","text-gray-200","animate-spin","dark:text-gray-600","fill-blue-600"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"],["class","bg-pink-500 px-2 py-1 text-white font-semibold text-center hover:cursor-pointer rounded-md inline-block mx-auto",3,"click",4,"ngIf"],[1,"bg-pink-500","px-2","py-1","text-white","font-semibold","text-center","hover:cursor-pointer","rounded-md","inline-block","mx-auto",3,"click"]],template:function(n,s){1&n&&(e.YNc(0,$,5,6,"div",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,s.selectSignedUser$))},dependencies:[_.ez,_.sg,_.O5,_.Ov,x.UU,Z.Is,g.Bz,I,x.iM]})}return i})()},1963:(C,h,o)=>{o.d(h,{J:()=>f});var _=o(6814),d=o(9347),c=o(8866),r=o(9212),x=o(4221);function u(a,T){1&a&&(r.TgZ(0,"div",4)(1,"div"),r._uU(2,"Printing in Progress...."),r.qZA()())}function Z(a,T){1&a&&(r.TgZ(0,"div",4)(1,"div"),r._uU(2,"Bill Printed successfully"),r.qZA()())}function g(a,T){1&a&&(r.TgZ(0,"div",4)(1,"div"),r._uU(2,"Bill Priting failed"),r.qZA()())}function e(a,T){if(1&a&&(r.YNc(0,Z,3,0,"div",5),r.ALo(1,"async"),r.YNc(2,g,3,0,"div",5),r.ALo(3,"async")),2&a){const v=r.oxw();let p,O;r.Q6J("ngIf",null==(p=r.lcZ(1,2,v.selectMakeBillMessages$))?null:p.successMessage),r.xp6(2),r.Q6J("ngIf",null==(O=r.lcZ(3,4,v.selectMakeBillMessages$))?null:O.failedMessage)}}let f=(()=>{class a{constructor(v,p){this.store=v,this.dialog=p,this.selectMakeBillSpinner$=this.store.select(c.selectMakeBillSpinner),this.selectMakeBillMessages$=this.store.select(c.selectMakeBillMessages)}closeDialog(){this.dialog.closeAll()}static#e=this.\u0275fac=function(p){return new(p||a)(r.Y36(x.yh),r.Y36(d.uw))};static#t=this.\u0275cmp=r.Xpm({type:a,selectors:[["hotel-orderapp-order-feature-print-progress"]],standalone:!0,features:[r.jDz],decls:8,vars:4,consts:[[1,"bg-gray-100","p-2"],["class","flex justify-center items-center h-64",4,"ngIf","ngIfElse"],["messages",""],[1,"bg-gray-700","text-white","max-w-sm","mx-auto","text-center","py-1","rounded-md","cursor-pointer",3,"click"],[1,"flex","justify-center","items-center","h-64"],["class","flex justify-center items-center h-64",4,"ngIf"]],template:function(p,O){if(1&p&&(r.TgZ(0,"div",0),r.YNc(1,u,3,0,"div",1),r.ALo(2,"async"),r.YNc(3,e,4,6,"ng-template",null,2,r.W1O),r.TgZ(5,"div")(6,"div",3),r.NdJ("click",function(){return O.closeDialog()}),r._uU(7," OK "),r.qZA()()()),2&p){const I=r.MAs(4);r.xp6(1),r.Q6J("ngIf",!0===r.lcZ(2,2,O.selectMakeBillSpinner$))("ngIfElse",I)}},dependencies:[_.ez,_.O5,_.Ov,d.Is]})}return a})()},4625:(C,h,o)=>{o.d(h,{z:()=>x});var _=o(6814),d=o(9347),c=o(2296),r=o(9212);let x=(()=>{class u{constructor(g,e){this.dialogRef=g,this.data=e}static#e=this.\u0275fac=function(e){return new(e||u)(r.Y36(d.so),r.Y36(d.WI))};static#t=this.\u0275cmp=r.Xpm({type:u,selectors:[["hotel-confirmation-dialog"]],standalone:!0,features:[r.jDz],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","mat-dialog-close","yes","cdkFocusInitial","","color","primary"]],template:function(e,f){1&e&&(r.TgZ(0,"h1",0),r._uU(1),r.qZA(),r.TgZ(2,"div",1),r._uU(3),r.qZA(),r.TgZ(4,"div",2)(5,"button",3),r._uU(6,"No"),r.qZA(),r.TgZ(7,"button",4),r._uU(8),r.qZA()()),2&e&&(r.xp6(1),r.Oqu(f.data.title),r.xp6(2),r.Oqu(f.data.content),r.xp6(5),r.hij(" ",f.data.okBtnText," "))},dependencies:[_.ez,c.ot,c.lW,d.Is,d.ZT,d.uh,d.H8,d.xY]})}return u})()}}]);