"use strict";(self.webpackChunkorderapp=self.webpackChunkorderapp||[]).push([[746],{3746:(Re,S,m)=>{m.r(S),m.d(S,{OrderappBackofficeFeatureProductManageComponent:()=>Q,ProductManageRoutes:()=>we});var t=m(3664),w=m(2200),u=m(4026),k=m(8610),l=m(9417),lt=m(8292),ht=m(9384),s=m(2615),T=m(9640);const mt=n=>({"bg-green-400":n});function pt(n,i){if(1&n&&(t.j41(0,"option",17),t.EFF(1),t.k0s()),2&n){const o=i.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.name," ")}}function gt(n,i){1&n&&(t.j41(0,"div",2)(1,"div",3),t.EFF(2,"Category"),t.k0s(),t.j41(3,"div",4)(4,"select",16),t.Z7z(5,pt,2,2,"option",17,t.fX1),t.k0s()()()),2&n&&(t.R7$(5),t.Dyx(i))}function ut(n,i){1&n&&(t.j41(0,"div"),t.EFF(1," Adding.... "),t.k0s())}function ft(n,i){if(1&n){const o=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){s.eBV(o);const a=t.XpG();return s.Njj(a.addProduct())}),t.EFF(1),t.k0s()}if(2&n){const o=t.XpG();t.Y8G("disabled",!o.productAddForm.valid)("ngClass",t.eq3(3,mt,o.productAddForm.valid)),t.R7$(),t.SpI(" ",o.data&&o.data.product?"UPDATE":"ADD"," ")}}let W=(()=>{var n;class i{constructor(e,a,r,c){this.store=e,this.data=a,this.dialog=r,this.dialogRef=c,this.selectCategories$=this.store.select(lt.Jk),this.selectAddProductIndicator$=this.store.select(u.Z4),this.productAddForm=new l.gE({name:new l.MJ("",{validators:[l.k0.required]}),code:new l.MJ("",{validators:[l.k0.required]}),secondaryLanguageName:new l.MJ("_",{validators:[l.k0.required]}),description:new l.MJ("None"),price:new l.MJ("",{validators:[l.k0.required]}),cost:new l.MJ("",{validators:[l.k0.required]}),categoryId:new l.MJ("",{validators:[l.k0.required]}),collectionId:new l.MJ("1",{validators:[l.k0.required]}),qwickViewOrder:new l.MJ("",{validators:[l.k0.required]}),printName:new l.MJ("test print"),color:new l.MJ("#E91E63")})}ngOnInit(){const e=this.data?.product;e&&this.productAddForm.patchValue(e)}addProduct(){if(this.productAddForm.valid)if(this.data&&this.data.product)this.store.dispatch((0,u.vc)({productId:this.data.product.id,product:this.productAddForm.value}));else{const e={...this.productAddForm.value};this.store.dispatch((0,u.Bj)({product:e}))}}static#t=n=()=>(this.\u0275fac=function(a){return new(a||i)(t.rXU(T.il),t.rXU(k.e),t.rXU(k.h),t.rXU(k.k))},this.\u0275cmp=t.VBU({type:i,selectors:[["hotel-orderapp-product-feature-add"]],decls:49,vars:7,consts:[[1,"p-5","text-sm",3,"formGroup"],[1,"sm:grid","sm:grid-cols-2","sm:gap-x-2"],[1,"grid","grid-cols-4","bg-white","px-2","sm:col-span-1"],[1,"col-span-1","py-2"],[1,"col-span-3","border-l-2","p-2"],["type","text","placeholder","Product Name","formControlName","name",1,"ml-2","w-full","rounded-md","border","p-2"],["type","text","placeholder","Print Name","formControlName","printName",1,"ml-2","w-full","rounded-md","border","p-2"],["type","text","placeholder","Product Code","formControlName","code",1,"ml-2","w-full","rounded-md","border","p-2"],["type","text","placeholder","Quickview Number","formControlName","qwickViewOrder",1,"ml-2","w-full","rounded-md","border","p-2"],["type","text","placeholder","Other Language","formControlName","secondaryLanguageName",1,"ml-2","w-full","rounded-md","border","p-2"],["type","text","placeholder","Description","formControlName","description",1,"ml-2","w-full","rounded-md","border","p-2"],[1,"mt-2","sm:mt-0","sm:grid","sm:grid-cols-2","sm:gap-x-2"],["type","text","placeholder","Selling rate","formControlName","price",1,"ml-2","w-full","rounded-md","border","p-2"],["type","text","placeholder","Cost","formControlName","cost",1,"ml-2","w-full","rounded-md","border","p-2"],[1,"mt-4"],["type","submit",1,"bg-gray-700","w-full","my-5","text-white","rounded-full","py-1","mt-4",3,"disabled","ngClass"],["formControlName","categoryId",1,"ml-2","w-full","rounded-md","border","p-2"],[3,"value"],["type","submit",1,"bg-gray-700","w-full","my-5","text-white","rounded-full","py-1","mt-4",3,"click","disabled","ngClass"]],template:function(a,r){if(1&a&&(t.j41(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3),t.EFF(4,"Product Name"),t.k0s(),t.j41(5,"div",4),t.nrm(6,"input",5),t.k0s()(),t.j41(7,"div",2)(8,"div",3),t.EFF(9,"Print Name"),t.k0s(),t.j41(10,"div",4),t.nrm(11,"input",6),t.k0s()(),t.j41(12,"div",2)(13,"div",3),t.EFF(14,"Code"),t.k0s(),t.j41(15,"div",4),t.nrm(16,"input",7),t.k0s()(),t.j41(17,"div",2)(18,"div",3),t.EFF(19,"Quick access"),t.k0s(),t.j41(20,"div",4),t.nrm(21,"input",8),t.k0s()(),t.j41(22,"div",2)(23,"div",3),t.EFF(24,"Other Language Name"),t.k0s(),t.j41(25,"div",4),t.nrm(26,"input",9),t.k0s()(),t.j41(27,"div",2)(28,"div",3),t.EFF(29,"Description"),t.k0s(),t.j41(30,"div",4),t.nrm(31,"input",10),t.k0s()()(),t.j41(32,"div",11),t.nVh(33,gt,7,0,"div",2),t.nI1(34,"async"),t.j41(35,"div",2)(36,"div",3),t.EFF(37,"Selling Rate"),t.k0s(),t.j41(38,"div",4),t.nrm(39,"input",12),t.k0s()(),t.j41(40,"div",2)(41,"div",3),t.EFF(42,"Cost"),t.k0s(),t.j41(43,"div",4),t.nrm(44,"input",13),t.k0s()()(),t.j41(45,"div",14),t.nVh(46,ut,2,0,"div"),t.nI1(47,"async"),t.vZN(48,ft,2,5,"button",15),t.k0s()()),2&a){let c;t.Y8G("formGroup",r.productAddForm),t.R7$(33),t.vxM((c=t.bMT(34,3,r.selectCategories$))?33:-1,c),t.R7$(13),t.vxM(t.bMT(47,5,r.selectAddProductIndicator$)?46:48)}},dependencies:[w.MD,w.YU,l.X1,l.qT,l.xH,l.y7,l.me,l.wz,l.BC,l.cb,l.j4,l.JD,ht.gG,w.Jj],encapsulation:2}))}return n(),i})();m(4915);var f=m(7705),_t=m(5042),vt=m(8511),bt=m(1560),xt=m(8107),yt=m(7218),wt=m(5967);const Ct=["mat-internal-form-field",""],Mt=["*"];let kt=(()=>{class n{labelPosition;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=t.VBU({type:n,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(e,a){2&e&&t.AVh("mdc-form-field--align-end","before"===a.labelPosition)},inputs:{labelPosition:"labelPosition"},attrs:Ct,ngContentSelectors:Mt,decls:1,vars:0,template:function(e,a){1&e&&(t.NAR(),t.SdG(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}\n"],encapsulation:2,changeDetection:0})}return n})();var H=m(1715);const It=["switch"],zt=["*"];function Rt(n,i){1&n&&(t.j41(0,"span",10),s.qSk(),t.j41(1,"svg",12),t.nrm(2,"path",13),t.k0s(),t.j41(3,"svg",14),t.nrm(4,"path",15),t.k0s()())}const Ft=new s.nKC("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})});class N{source;checked;constructor(i,o){this.source=i,this.checked=o}}let $=(()=>{class n{_elementRef=(0,s.WQX)(t.aKT);_focusMonitor=(0,s.WQX)(_t.F);_changeDetectorRef=(0,s.WQX)(f.gRc);defaults=(0,s.WQX)(Ft);_onChange=o=>{};_onTouched=()=>{};_validatorOnChange=()=>{};_uniqueId;_checked=!1;_createChangeEvent(o){return new N(this,o)}_labelId;get buttonId(){return`${this.id||this._uniqueId}-button`}_switchElement;focus(){this._switchElement.nativeElement.focus()}_noopAnimations=(0,xt._)();_focused;name=null;id;labelPosition="after";ariaLabel=null;ariaLabelledby=null;ariaDescribedby;required;color;disabled=!1;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(o){this._checked=o,this._changeDetectorRef.markForCheck()}hideIcon;disabledInteractive;change=new t.bkB;toggleChange=new t.bkB;get inputId(){return`${this.id||this._uniqueId}-input`}constructor(){(0,s.WQX)(bt._).load(yt._);const o=(0,s.WQX)(new f.ES_("tabindex"),{optional:!0}),e=this.defaults;this.tabIndex=null==o?0:parseInt(o)||0,this.color=e.color||"accent",this.id=this._uniqueId=(0,s.WQX)(vt._).getId("mat-mdc-slide-toggle-"),this.hideIcon=e.hideIcon??!1,this.disabledInteractive=e.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(o=>{"keyboard"===o||"program"===o?(this._focused=!0,this._changeDetectorRef.markForCheck()):o||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(o){o.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(o){this.checked=!!o}registerOnChange(o){this._onChange=o}registerOnTouched(o){this._onTouched=o}validate(o){return this.required&&!0!==o.value?{required:!0}:null}registerOnValidatorChange(o){this._validatorOnChange=o}setDisabledState(o){this.disabled=o,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new N(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=t.VBU({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(e,a){if(1&e&&t.GBs(It,5),2&e){let r;t.mGM(r=t.lsd())&&(a._switchElement=r.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(e,a){2&e&&(t.Avn("id",a.id),t.BMQ("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),t.HbH(a.color?"mat-"+a.color:""),t.AVh("mat-mdc-slide-toggle-focused",a._focused)("mat-mdc-slide-toggle-checked",a.checked)("_mat-animation-noopable",a._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",f.L39],color:"color",disabled:[2,"disabled","disabled",f.L39],disableRipple:[2,"disableRipple","disableRipple",f.L39],tabIndex:[2,"tabIndex","tabIndex",o=>null==o?0:(0,f.Udg)(o)],checked:[2,"checked","checked",f.L39],hideIcon:[2,"hideIcon","hideIcon",f.L39],disabledInteractive:[2,"disabledInteractive","disabledInteractive",f.L39]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[t.Jv_([{provide:l.kq,useExisting:(0,s.Rfq)(()=>n),multi:!0},{provide:l.cz,useExisting:n,multi:!0}]),t.OA$],ngContentSelectors:zt,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(e,a){if(1&e){const r=t.RV6();t.NAR(),t.j41(0,"div",1)(1,"button",2,0),t.bIt("click",function(){return s.eBV(r),s.Njj(a._handleClick())}),t.nrm(3,"span",3),t.j41(4,"span",4)(5,"span",5)(6,"span",6),t.nrm(7,"span",7),t.k0s(),t.j41(8,"span",8),t.nrm(9,"span",9),t.k0s(),t.nVh(10,Rt,5,0,"span",10),t.k0s()()(),t.j41(11,"label",11),t.bIt("click",function(d){return s.eBV(r),s.Njj(d.stopPropagation())}),t.SdG(12),t.k0s()()}if(2&e){const r=t.sdS(2);t.Y8G("labelPosition",a.labelPosition),t.R7$(),t.AVh("mdc-switch--selected",a.checked)("mdc-switch--unselected",!a.checked)("mdc-switch--checked",a.checked)("mdc-switch--disabled",a.disabled)("mat-mdc-slide-toggle-disabled-interactive",a.disabledInteractive),t.Y8G("tabIndex",a.disabled&&!a.disabledInteractive?-1:a.tabIndex)("disabled",a.disabled&&!a.disabledInteractive),t.BMQ("id",a.buttonId)("name",a.name)("aria-label",a.ariaLabel)("aria-labelledby",a._getAriaLabelledBy())("aria-describedby",a.ariaDescribedby)("aria-required",a.required||null)("aria-checked",a.checked)("aria-disabled",a.disabled&&a.disabledInteractive?"true":null),t.R7$(8),t.Y8G("matRippleTrigger",r)("matRippleDisabled",a.disableRipple||a.disabled)("matRippleCentered",!0),t.R7$(),t.vxM(a.hideIcon?-1:10),t.R7$(),t.Y8G("for",a.buttonId),t.BMQ("id",a._labelId)}},dependencies:[wt.M,kt],styles:['.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mat-slide-toggle-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mat-slide-toggle-track-height, 32px);border-radius:var(--mat-slide-toggle-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mat-slide-toggle-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-slide-toggle-track-outline-width, 2px);border-color:var(--mat-slide-toggle-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-slide-toggle-selected-track-outline-width, 2px);border-color:var(--mat-slide-toggle-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-slide-toggle-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-slide-toggle-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mat-slide-toggle-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-slide-toggle-hidden-track-opacity, 0);transition:var(--mat-slide-toggle-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-slide-toggle-visible-track-opacity, 1);transition:var(--mat-slide-toggle-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mat-slide-toggle-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mat-slide-toggle-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mat-slide-toggle-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mat-slide-toggle-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mat-slide-toggle-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-slide-toggle-visible-track-opacity, 1);transition:var(--mat-slide-toggle-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-slide-toggle-hidden-track-opacity, 0);transition:var(--mat-slide-toggle-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mat-slide-toggle-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mat-slide-toggle-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mat-slide-toggle-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mat-slide-toggle-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mat-slide-toggle-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mat-slide-toggle-handle-width);height:var(--mat-slide-toggle-handle-height);border-radius:var(--mat-slide-toggle-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-slide-toggle-unselected-handle-size, 16px);height:var(--mat-slide-toggle-unselected-handle-size, 16px);margin:var(--mat-slide-toggle-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-slide-toggle-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-slide-toggle-selected-handle-size, 24px);height:var(--mat-slide-toggle-selected-handle-size, 24px);margin:var(--mat-slide-toggle-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-slide-toggle-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-slide-toggle-with-icon-handle-size, 24px);height:var(--mat-slide-toggle-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-slide-toggle-pressed-handle-size, 28px);height:var(--mat-slide-toggle-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-slide-toggle-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-slide-toggle-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-slide-toggle-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-slide-toggle-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mat-slide-toggle-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mat-slide-toggle-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mat-slide-toggle-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mat-slide-toggle-state-layer-size, 40px);height:var(--mat-slide-toggle-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mat-slide-toggle-unselected-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-slide-toggle-unselected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mat-slide-toggle-unselected-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-slide-toggle-unselected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mat-slide-toggle-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-slide-toggle-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mat-slide-toggle-selected-hover-state-layer-color, var(--mat-sys-primary));opacity:var(--mat-slide-toggle-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mat-slide-toggle-selected-focus-state-layer-color, var(--mat-sys-primary));opacity:var(--mat-slide-toggle-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mat-slide-toggle-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mat-slide-toggle-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1;transform:translateZ(0)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mat-slide-toggle-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mat-slide-toggle-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mat-slide-toggle-unselected-icon-size, 16px);height:var(--mat-slide-toggle-unselected-icon-size, 16px);fill:var(--mat-slide-toggle-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mat-slide-toggle-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mat-slide-toggle-selected-icon-size, 16px);height:var(--mat-slide-toggle-selected-icon-size, 16px);fill:var(--mat-slide-toggle-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mat-slide-toggle-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-slide-toggle-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-slide-toggle-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-slide-toggle-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-slide-toggle-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-slide-toggle-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-slide-toggle-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mat-slide-toggle-disabled-label-text-color, var(--mat-sys-on-surface))}\n'],encapsulation:2,changeDetection:0})}return n})(),jt=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=t.$C({type:n});static \u0275inj=s.G2t({imports:[$,H.M,H.M]})}return n})();var z=m(2021),Tt=m(1074);const At=n=>({"bg-green-400":n});function Ot(n,i){1&n&&(t.j41(0,"div"),t.EFF(1," Adding.... "),t.k0s())}function Pt(n,i){if(1&n){const o=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){s.eBV(o);const a=t.XpG();return s.Njj(a.addVariant())}),t.EFF(1),t.k0s()}if(2&n){const o=t.XpG();t.Y8G("disabled",!o.variantAddForm.valid)("ngClass",t.eq3(3,At,o.variantAddForm.valid)),t.R7$(),t.SpI(" ",o.data&&o.data.variant?"UPDATE":"ADD"," ")}}let Y=(()=>{var n;class i{constructor(e,a,r){this.store=e,this.data=a,this.dialogRef=r,this.selectAddVariantIndicator$=this.store.select(u._T),this.variantAddForm=new l.gE({name:new l.MJ("",{validators:[l.k0.required]}),price:new l.MJ("",{validators:[l.k0.required]})})}ngOnInit(){const e=this.data?.variant;console.log("kitchen t edit",e),e&&this.variantAddForm.patchValue(e)}addVariant(){if(this.variantAddForm.valid)if(this.data&&this.data.variant)this.store.dispatch((0,u.lg)({variantId:this.data.variant.id,variant:this.variantAddForm.value}));else{const e={...this.variantAddForm.value};this.store.dispatch((0,u.rn)({productId:this.data.productId,variant:e}))}}static#t=n=()=>(this.\u0275fac=function(a){return new(a||i)(t.rXU(T.il),t.rXU(k.e),t.rXU(k.k))},this.\u0275cmp=t.VBU({type:i,selectors:[["hotel-orderapp-product-feature-variant-add"]],decls:16,vars:4,consts:[[1,"bg-gray-100","p-2"],[1,"mx-auto","grid","max-w-md","gap-2","bg-white","p-2"],[1,"mb-2","font-bold"],[3,"formGroup"],[1,"grid","gap-2"],["for","name"],["type","text","formControlName","name",1,"w-full","rounded-md","border","px-2","py-1"],["for","price"],["type","text","formControlName","price",1,"w-full","rounded-md","border","px-2","py-1"],["type","submit",1,"bg-gray-700","text-white","py-1","px-2","rounded-md","mt-3","w-full",3,"disabled","ngClass"],["type","submit",1,"bg-gray-700","text-white","py-1","px-2","rounded-md","mt-3","w-full",3,"click","disabled","ngClass"]],template:function(a,r){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Add a Variant"),t.k0s(),t.j41(4,"form",3)(5,"div",4)(6,"label",5),t.EFF(7,"Variant Name"),t.k0s(),t.nrm(8,"input",6),t.k0s(),t.j41(9,"div",4)(10,"label",7),t.EFF(11,"Price"),t.k0s(),t.nrm(12,"input",8),t.k0s(),t.nVh(13,Ot,2,0,"div"),t.nI1(14,"async"),t.vZN(15,Pt,2,5,"button",9),t.k0s()()()),2&a&&(t.R7$(4),t.Y8G("formGroup",r.variantAddForm),t.R7$(9),t.vxM(t.bMT(14,2,r.selectAddVariantIndicator$)?13:15))},dependencies:[w.MD,w.YU,l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,w.Jj],encapsulation:2}))}return n(),i})();var O=m(8132);const Bt=n=>[n];function Vt(n,i){1&n&&(t.j41(0,"div",0),t.EFF(1," Loading "),t.k0s())}function Xt(n,i){if(1&n){const o=t.RV6();t.j41(0,"div",26)(1,"div",27),t.bIt("click",function(){const a=s.eBV(o).$implicit,r=t.XpG(2).$implicit,c=t.XpG(4);return s.Njj(c.editVariant(r.id,a))}),t.EFF(2),t.k0s(),t.j41(3,"div",28),t.EFF(4),t.k0s(),t.nrm(5,"div",22),t.j41(6,"div",29),t.bIt("click",function(){const a=s.eBV(o).$implicit,r=t.XpG(6);return s.Njj(r.deleteVariant(a.id))}),t.EFF(7," X "),t.k0s()()}if(2&n){const o=i.$implicit;t.R7$(2),t.SpI(" ",o.name," "),t.R7$(2),t.SpI(" ",o.price," ")}}function Et(n,i){if(1&n&&(t.j41(0,"div",19),t.Z7z(1,Xt,8,2,"div",26,t.fX1),t.k0s()),2&n){const o=t.XpG().$implicit;t.R7$(),t.Dyx(o.variants)}}function Lt(n,i){if(1&n){const o=t.RV6();t.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"a",14),t.EFF(4),t.k0s(),t.j41(5,"div",15)(6,"mat-slide-toggle",16),t.bIt("change",function(){const a=s.eBV(o).$implicit,r=t.XpG(4);return s.Njj(r.updateAvalability(a))}),t.k0s()()()(),t.j41(7,"div",17)(8,"span",18),t.EFF(9,"Code : "),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"div",17)(12,"span",18),t.EFF(13,"Price : "),t.k0s(),t.EFF(14),t.k0s(),t.j41(15,"div",17)(16,"span",18),t.EFF(17,"Quick Order : "),t.k0s(),t.EFF(18),t.k0s(),t.nVh(19,Et,3,0,"div",19),t.j41(20,"div",20)(21,"button",21),t.bIt("click",function(){const a=s.eBV(o).$implicit,r=t.XpG(4);return s.Njj(r.addVariant(a.id))}),t.EFF(22," ADD VARIANT "),t.k0s(),t.nrm(23,"div",22),t.j41(24,"div",23)(25,"div",24),t.bIt("click",function(){const a=s.eBV(o).$implicit,r=t.XpG(4);return s.Njj(r.editProduct(a))}),t.EFF(26," E "),t.k0s(),t.j41(27,"div",25),t.bIt("click",function(){const a=s.eBV(o).$implicit,r=t.XpG(4);return s.Njj(r.deactivatePrduct(a.id))}),t.EFF(28," D "),t.k0s()()()()}if(2&n){const o=i.$implicit;t.R7$(3),t.Y8G("routerLink",t.eq3(7,Bt,o.id)),t.R7$(),t.SpI(" ",o.name),t.R7$(2),t.Y8G("checked",o.inStock),t.R7$(4),t.SpI("",o.code," "),t.R7$(4),t.SpI(" ",o.price," "),t.R7$(4),t.SpI("",o.qwickViewOrder," "),t.R7$(),t.vxM(o.variants.length>0?19:-1)}}function Dt(n,i){if(1&n&&(t.j41(0,"mat-expansion-panel",7)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),t.EFF(3),t.k0s()(),t.j41(4,"div",8)(5,"div",9)(6,"div",10),t.Z7z(7,Lt,29,9,"div",11,t.fX1),t.k0s()()()()),2&n){const o=i.$implicit,e=t.XpG(),a=t.XpG(2);t.R7$(3),t.JRh(o),t.R7$(4),t.Dyx(a.getProductsFromCategory(e,o))}}function Gt(n,i){if(1&n&&(t.j41(0,"div",6),t.Z7z(1,Dt,9,1,"mat-expansion-panel",7,t.fX1),t.k0s()),2&n){const o=t.XpG(2);t.R7$(),t.Dyx(o.getKeys(i))}}function Ut(n,i){if(1&n){const o=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"button",3),t.bIt("click",function(){s.eBV(o);const a=t.XpG();return s.Njj(a.accordion.openAll())}),t.EFF(3," Expand All "),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){s.eBV(o);const a=t.XpG();return s.Njj(a.accordion.closeAll())}),t.EFF(5," Collapse All "),t.k0s(),t.j41(6,"button",4),t.bIt("click",function(){s.eBV(o);const a=t.XpG();return s.Njj(a.addProduct())}),t.EFF(7," ADD NEW PRODUCT "),t.k0s()(),t.j41(8,"mat-accordion",5),t.nVh(9,Gt,3,0,"div",6),t.nI1(10,"async"),t.k0s()()}if(2&n){let o;const e=t.XpG();t.R7$(9),t.vxM((o=t.bMT(10,1,e.productscategory$))?9:-1,o)}}let St=(()=>{var n;class i{constructor(e,a){this.store=e,this.dialog=a,this.selectProducts$=this.store.select(u.Ks),this.productscategory$=this.store.select((0,u.rs)("")),this.addBtnEvent=new t.bkB,this.selectProductFetchInProgressFlag$=this.store.select(u.gQ)}editProduct(e){this.dialog.open(W,{data:{product:e}})}addProduct(){this.addBtnEvent.emit("product")}updateAvalability(e){this.store.dispatch((0,u.qh)({productId:e.id,data:{fieldName:"inStock",value:!e.inStock}}))}addVariant(e){this.dialog.open(Y,{data:{productId:e}})}deleteVariant(e){confirm("Do You want to delete the variant")&&this.store.dispatch((0,u.ng)({variantId:e}))}editVariant(e,a){this.dialog.open(Y,{data:{productId:e,variant:a}})}deactivatePrduct(e){confirm("Do You want to delete the product")&&this.store.dispatch((0,u.DD)({productId:e}))}getProductsFromCategory(e,a){return e[a]}getKeys(e){return Object.keys(e)}static#t=n=()=>(this.\u0275fac=function(a){return new(a||i)(t.rXU(T.il),t.rXU(k.h))},this.\u0275cmp=t.VBU({type:i,selectors:[["hotel-orderapp-product-feature-admin-list"]],viewQuery:function(a,r){if(1&a&&t.GBs(z.BS,5),2&a){let c;t.mGM(c=t.lsd())&&(r.accordion=c.first)}},outputs:{addBtnEvent:"addBtnEvent"},decls:3,vars:3,consts:[[1,"h-24","flex","justify-center","items-center"],[1,"p-2"],[1,"flex","gap-4","justify-center","p-2"],[1,"border","p-2","rounded-md",3,"click"],[1,"bg-green-900","text-white","hover:bg-green-700","p-2","rounded-lg",3,"click"],["multi","",1,"example-headers-align"],[1,"bg-gray-100"],["expanded",""],[1,"pt-4","px-2"],["id","{category}",1,"py-2"],[1,"grid","grid-cols-1","sm:grid-cols-3","md:grid-cols-4","gap-1","lg:grid-cols-6"],[1,"rounded-md","border","p-2","flex","flex-col","gap-2"],[1,"border-b","pb-2","mt-1","font-semibold"],[1,"flex","justify-between"],[3,"routerLink"],[1,""],[3,"change","checked"],[1,"col-span-1"],[1,"font-thin","text-sm"],[1,"p-2","border","rounded-md"],[1,"flex","z-0"],[1,"flex","p-1","items-center","bg-green-400","justify-center","rounded-md","duration-500","hover:bg-green-200","text-xs",3,"click"],[1,"flex-grow"],[1,"flex","gap-4"],[1,"flex","h-6","w-6","items-center","bg-pink-300","hover:bg-pink-400","justify-center","border","rounded-full","p-2","cursor-pointer",3,"click"],[1,"flex","h-6","w-6","items-center","bg-orange-300","hover:bg-orange-400","justify-center","border","rounded-full","p-2","cursor-pointer",3,"click"],[1,"flex","items-center"],[1,"hover:scale-110","hover:text-green-800","cursor-pointer","hover:underline",3,"click"],[1,"px-2","bg-gray-200","rounded-md","mx-2","transform"],[1,"flex","h-4","w-4","items-center","bg-gray-400","hover:bg-gray-300","justify-center","border","rounded-full","cursor-pointer",3,"click"]],template:function(a,r){1&a&&(t.nVh(0,Vt,2,0,"div",0),t.nI1(1,"async"),t.vZN(2,Ut,11,3,"div",1)),2&a&&t.vxM(t.bMT(1,1,r.selectProductFetchInProgressFlag$)?0:2)},dependencies:[w.MD,k.l,jt,$,z.MY,z.BS,z.GK,z.Z2,z.WN,Tt.m_,O.iI,O.Wk,w.Jj],encapsulation:2}))}return n(),i})();var Wt=m(8559);let Q=(()=>{var n;class i{constructor(e,a){this.dialog=e,this.store=a,this.store.dispatch((0,u.HB)())}ngOnDestroy(){this.store.dispatch((0,u.ld)({searchTerm:""}))}addProduct(){this.dialog.open(W,{})}static#t=n=()=>(this.\u0275fac=function(a){return new(a||i)(t.rXU(k.h),t.rXU(T.il))},this.\u0275cmp=t.VBU({type:i,selectors:[["hotel-orderapp-backoffice-feature-product-manage"]],decls:6,vars:0,consts:[[1,"relative"],[1,"flex","z-50","bg-white","sticky","top-0","p-2"],[1,"z-50","w-full"],[3,"addBtnEvent"]],template:function(a,r){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.nrm(3,"hotel-orderapp-product-feature-search"),t.k0s()(),t.j41(4,"div")(5,"hotel-orderapp-product-feature-admin-list",3),t.bIt("addBtnEvent",function(){return r.addProduct()}),t.k0s()()())},dependencies:[St,Wt.U],encapsulation:2}))}return n(),i})();var C=m(467),Ht=m(6354),Nt=m(5558),q=m(6977),$t=m(1594),Yt=m(1413),J=m(7786),R=m(3726),K=m(345);const Qt=["wrapper"],qt=["sourceImage"];function Jt(n,i){if(1&n){const o=t.RV6();t.j41(0,"img",5,0),t.bIt("load",function(){s.eBV(o);const a=t.XpG();return s.Njj(a.imageLoadedInView())})("mousedown",function(a){s.eBV(o);const r=t.XpG();return s.Njj(r.startMove(a,r.moveTypes.Drag))})("touchstart",function(a){s.eBV(o);const r=t.XpG();return s.Njj(r.startMove(a,r.moveTypes.Drag))})("error",function(a){s.eBV(o);const r=t.XpG();return s.Njj(r.loadImageError(a))}),t.k0s()}if(2&n){const o=i.ngIf,e=t.XpG();t.xc7("visibility",e.imageVisible?"visible":"hidden")("transform",e.safeTransformStyle()),t.AVh("ngx-ic-draggable",!e.disabled&&e.allowMoveImage),t.Y8G("src",o,t.B4B),t.BMQ("alt",e.imageAltText)}}function Kt(n,i){if(1&n){const o=t.RV6();t.qex(0),t.j41(1,"span",9),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"topleft"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"topleft"))}),t.nrm(2,"span",10),t.k0s(),t.j41(3,"span",11),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"topright"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"topright"))}),t.nrm(4,"span",10),t.k0s(),t.j41(5,"span",12),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"bottomright"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"bottomright"))}),t.nrm(6,"span",10),t.k0s(),t.j41(7,"span",13),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"bottomleft"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"bottomleft"))}),t.nrm(8,"span",10),t.k0s(),t.j41(9,"span",14),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"top"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"top"))}),t.k0s(),t.j41(10,"span",15),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"top"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"top"))}),t.nrm(11,"span",10),t.k0s(),t.j41(12,"span",16),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"right"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"right"))}),t.k0s(),t.j41(13,"span",17),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"right"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"right"))}),t.nrm(14,"span",10),t.k0s(),t.j41(15,"span",18),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"bottom"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"bottom"))}),t.k0s(),t.j41(16,"span",19),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"bottom"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"bottom"))}),t.nrm(17,"span",10),t.k0s(),t.j41(18,"span",20),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"left"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"left"))}),t.k0s(),t.j41(19,"span",21),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"left"))})("touchstart",function(a){s.eBV(o);const r=t.XpG(2);return s.Njj(r.startMove(a,r.moveTypes.Resize,"left"))}),t.nrm(20,"span",10),t.k0s(),t.bVm()}}function Zt(n,i){if(1&n){const o=t.RV6();t.j41(0,"div",6),t.bIt("keydown",function(a){s.eBV(o);const r=t.XpG();return s.Njj(r.keyboardAccess(a))}),t.j41(1,"div",7),t.bIt("mousedown",function(a){s.eBV(o);const r=t.XpG();return s.Njj(r.startMove(a,r.moveTypes.Move))})("touchstart",function(a){s.eBV(o);const r=t.XpG();return s.Njj(r.startMove(a,r.moveTypes.Move))}),t.k0s(),t.DNE(2,Kt,21,0,"ng-container",8),t.k0s()}if(2&n){const o=t.XpG();t.xc7("top",o.state.cropper().y1,"px")("left",o.state.cropper().x1,"px")("width",o.state.cropper().x2-o.state.cropper().x1,"px")("height",o.state.cropper().y2-o.state.cropper().y1,"px")("margin-left","center"===o.state.options.alignImage?o.marginLeft:null)("visibility",o.imageVisible?"visible":"hidden"),t.AVh("ngx-ic-round",o.state.options.roundCropper),t.BMQ("aria-label",o.state.options.cropperFrameAriaLabel),t.R7$(2),t.Y8G("ngIf",!(o.state.options.hideResizeSquares||o.state.options.cropperStaticWidth&&o.state.options.cropperStaticHeight))}}function A(n,i,o){return n=function te(n,i){let o=n.x2-n.x1,e=n.y2-n.y1;const a=n.x1+o/2,r=n.y1+e/2;i.options.cropperStaticHeight&&i.options.cropperStaticWidth?(o=i.maxSize().width>i.options.cropperStaticWidth?i.options.cropperStaticWidth:i.maxSize().width,e=i.maxSize().height>i.options.cropperStaticHeight?i.options.cropperStaticHeight:i.maxSize().height):(o=Math.max(i.cropperScaledMinWidth,Math.min(o,i.cropperScaledMaxWidth,i.maxSize().width)),e=Math.max(i.cropperScaledMinHeight,Math.min(e,i.cropperScaledMaxHeight,i.maxSize().height)),i.options.maintainAspectRatio&&(i.maxSize().width/i.options.aspectRatio<i.maxSize().height?e=o/i.options.aspectRatio:o=e*i.options.aspectRatio));const c=a-o/2,h=r-e/2;return{x1:c,x2:c+o,y1:h,y2:h+e}}(n,i),P(n,i,o)}function P(n,i,o=!1){return n.x1<0&&(n={...n,x1:0,x2:n.x2-(o?n.x1:0)}),n.y1<0&&(n={...n,y2:n.y2-(o?n.y1:0),y1:0}),n.x2>i.maxSize().width&&(n={...n,x1:n.x1-(o?n.x2-i.maxSize().width:0),x2:i.maxSize().width}),n.y2>i.maxSize().height&&(n={...n,y1:n.y1-(o?n.y2-i.maxSize().height:0),y2:i.maxSize().height}),n}function Z(n,i,o){const e={...o.cropper()},a=B(n)-i.clientX,r=V(n)-i.clientY;switch(i.position){case"left":e.x1=Math.min(Math.max(i.cropper.x1+a,e.x2-o.cropperScaledMaxWidth),e.x2-o.cropperScaledMinWidth);break;case"topleft":e.x1=Math.min(Math.max(i.cropper.x1+a,e.x2-o.cropperScaledMaxWidth),e.x2-o.cropperScaledMinWidth),e.y1=Math.min(Math.max(i.cropper.y1+r,e.y2-o.cropperScaledMaxHeight),e.y2-o.cropperScaledMinHeight);break;case"top":e.y1=Math.min(Math.max(i.cropper.y1+r,e.y2-o.cropperScaledMaxHeight),e.y2-o.cropperScaledMinHeight);break;case"topright":e.x2=Math.max(Math.min(i.cropper.x2+a,e.x1+o.cropperScaledMaxWidth),e.x1+o.cropperScaledMinWidth),e.y1=Math.min(Math.max(i.cropper.y1+r,e.y2-o.cropperScaledMaxHeight),e.y2-o.cropperScaledMinHeight);break;case"right":e.x2=Math.max(Math.min(i.cropper.x2+a,e.x1+o.cropperScaledMaxWidth),e.x1+o.cropperScaledMinWidth);break;case"bottomright":e.x2=Math.max(Math.min(i.cropper.x2+a,e.x1+o.cropperScaledMaxWidth),e.x1+o.cropperScaledMinWidth),e.y2=Math.max(Math.min(i.cropper.y2+r,e.y1+o.cropperScaledMaxHeight),e.y1+o.cropperScaledMinHeight);break;case"bottom":e.y2=Math.max(Math.min(i.cropper.y2+r,e.y1+o.cropperScaledMaxHeight),e.y1+o.cropperScaledMinHeight);break;case"bottomleft":e.x1=Math.min(Math.max(i.cropper.x1+a,e.x2-o.cropperScaledMaxWidth),e.x2-o.cropperScaledMinWidth),e.y2=Math.max(Math.min(i.cropper.y2+r,e.y1+o.cropperScaledMaxHeight),e.y1+o.cropperScaledMinHeight);break;case"center":const c="scale"in n?n.scale:1,d=Math.min(Math.max(o.cropperScaledMinWidth,Math.abs(i.cropper.x2-i.cropper.x1)*c),o.cropperScaledMaxWidth),h=Math.min(Math.max(o.cropperScaledMinHeight,Math.abs(i.cropper.y2-i.cropper.y1)*c),o.cropperScaledMaxHeight);e.x1=i.clientX-d/2,e.x2=i.clientX+d/2,e.y1=i.clientY-h/2,e.y2=i.clientY+h/2,e.x1<0?(e.x2-=e.x1,e.x1=0):e.x2>o.maxSize().width&&(e.x1-=e.x2-o.maxSize().width,e.x2=o.maxSize().width),e.y1<0?(e.y2-=e.y1,e.y1=0):e.y2>o.maxSize().height&&(e.y1-=e.y2-o.maxSize().height,e.y2=o.maxSize().height)}return o.options.maintainAspectRatio?function ie(n,i,o){i={...i};let e=0,a=0;switch(n){case"top":i.x2=i.x1+(i.y2-i.y1)*o.options.aspectRatio,e=Math.max(i.x2-o.maxSize().width,0),a=Math.max(0-i.y1,0),(e>0||a>0)&&(i.x2-=a*o.options.aspectRatio>e?a*o.options.aspectRatio:e,i.y1+=a*o.options.aspectRatio>e?a:e/o.options.aspectRatio);break;case"bottom":i.x2=i.x1+(i.y2-i.y1)*o.options.aspectRatio,e=Math.max(i.x2-o.maxSize().width,0),a=Math.max(i.y2-o.maxSize().height,0),(e>0||a>0)&&(i.x2-=a*o.options.aspectRatio>e?a*o.options.aspectRatio:e,i.y2-=a*o.options.aspectRatio>e?a:e/o.options.aspectRatio);break;case"topleft":i.y1=i.y2-(i.x2-i.x1)/o.options.aspectRatio,e=Math.max(0-i.x1,0),a=Math.max(0-i.y1,0),(e>0||a>0)&&(i.x1+=a*o.options.aspectRatio>e?a*o.options.aspectRatio:e,i.y1+=a*o.options.aspectRatio>e?a:e/o.options.aspectRatio);break;case"topright":i.y1=i.y2-(i.x2-i.x1)/o.options.aspectRatio,e=Math.max(i.x2-o.maxSize().width,0),a=Math.max(0-i.y1,0),(e>0||a>0)&&(i.x2-=a*o.options.aspectRatio>e?a*o.options.aspectRatio:e,i.y1+=a*o.options.aspectRatio>e?a:e/o.options.aspectRatio);break;case"right":case"bottomright":i.y2=i.y1+(i.x2-i.x1)/o.options.aspectRatio,e=Math.max(i.x2-o.maxSize().width,0),a=Math.max(i.y2-o.maxSize().height,0),(e>0||a>0)&&(i.x2-=a*o.options.aspectRatio>e?a*o.options.aspectRatio:e,i.y2-=a*o.options.aspectRatio>e?a:e/o.options.aspectRatio);break;case"left":case"bottomleft":i.y2=i.y1+(i.x2-i.x1)/o.options.aspectRatio,e=Math.max(0-i.x1,0),a=Math.max(i.y2-o.maxSize().height,0),(e>0||a>0)&&(i.x1+=a*o.options.aspectRatio>e?a*o.options.aspectRatio:e,i.y2-=a*o.options.aspectRatio>e?a:e/o.options.aspectRatio);break;case"center":i.x2=i.x1+(i.y2-i.y1)*o.options.aspectRatio,i.y2=i.y1+(i.x2-i.x1)/o.options.aspectRatio;const r=Math.max(0-i.x1,0),c=Math.max(i.x2-o.maxSize().width,0),d=Math.max(i.y2-o.maxSize().height,0),h=Math.max(0-i.y1,0);(r>0||c>0||d>0||h>0)&&(i.x1+=d*o.options.aspectRatio>r?d*o.options.aspectRatio:r,i.x2-=h*o.options.aspectRatio>c?h*o.options.aspectRatio:c,i.y1+=h*o.options.aspectRatio>c?h:c/o.options.aspectRatio,i.y2-=d*o.options.aspectRatio>r?d:r/o.options.aspectRatio)}return i}(i.position,e,o):e}function B(n){return"touches"in n&&n.touches[0]?n.touches[0].clientX:"clientX"in n?n.clientX:0}function V(n){return"touches"in n&&n.touches[0]?n.touches[0].clientY:"clientX"in n?n.clientY:0}class ae{constructor(){this.cropper=(0,s.vPA)({x1:0,x2:0,y1:0,y2:0}),this.maxSize=(0,s.vPA)({width:0,height:0}),this.transform={},this.options={format:"png",output:"blob",autoCrop:!0,maintainAspectRatio:!0,aspectRatio:1,resetCropOnAspectRatioChange:!0,resizeToWidth:0,resizeToHeight:0,cropperMinWidth:0,cropperMinHeight:0,cropperMaxHeight:0,cropperMaxWidth:0,cropperStaticWidth:0,cropperStaticHeight:0,canvasRotation:0,roundCropper:!1,onlyScaleDown:!1,imageQuality:92,backgroundColor:null,containWithinAspectRatio:!1,hideResizeSquares:!1,alignImage:"center",cropperFrameAriaLabel:void 0,checkImageType:!0},this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=3}setOptionsFromChanges(i){i.options?.currentValue&&this.setOptions(i.options.currentValue);const o=Object.entries(i).filter(([e])=>e in this.options).reduce((e,[a,r])=>({...e,[a]:r.currentValue}),{});Object.keys(o).length>0&&this.setOptions(o)}setOptions(i){if(this.options={...this.options,...i||{}},this.validateOptions(),!this.loadedImage?.transformed.image.complete||!this.maxSize)return;let o=!1;this.options.maintainAspectRatio&&i.aspectRatio||"maintainAspectRatio"in i?(this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.options.maintainAspectRatio&&(this.options.resetCropOnAspectRatioChange||!this.aspectRatioIsCorrect())&&(this.cropper.set(this.maxSizeCropperPosition()),o=!0)):((i.cropperMinWidth||i.cropperMinHeight)&&(this.setCropperScaledMinSize(),o=!0),(i.cropperMaxWidth||i.cropperMaxHeight)&&(this.setCropperScaledMaxSize(),o=!0),(i.cropperStaticWidth||i.cropperStaticHeight)&&(o=!0)),o&&this.cropper.update(e=>A(e,this,!1))}validateOptions(){if(this.options.maintainAspectRatio&&!this.options.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}setMaxSize(i,o){this.maxSize.set({width:i,height:o}),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}setCropperScaledMinSize(){this.loadedImage?.transformed.size?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.options.cropperMinWidth>0?Math.max(20,this.options.cropperMinWidth/this.loadedImage.transformed.size.width*this.maxSize().width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.options.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.options.aspectRatio):this.options.cropperMinHeight>0?Math.max(20,this.options.cropperMinHeight/this.loadedImage.transformed.size.height*this.maxSize().height):20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed.size){const i=this.loadedImage.transformed.size.width/this.maxSize().width;this.cropperScaledMaxWidth=this.options.cropperMaxWidth>20?this.options.cropperMaxWidth/i:this.maxSize().width,this.cropperScaledMaxHeight=this.options.cropperMaxHeight>20?this.options.cropperMaxHeight/i:this.maxSize().height,this.options.maintainAspectRatio&&(this.cropperScaledMaxWidth>this.cropperScaledMaxHeight*this.options.aspectRatio?this.cropperScaledMaxWidth=this.cropperScaledMaxHeight*this.options.aspectRatio:this.cropperScaledMaxWidth<this.cropperScaledMaxHeight*this.options.aspectRatio&&(this.cropperScaledMaxHeight=this.cropperScaledMaxWidth/this.options.aspectRatio))}else this.cropperScaledMaxWidth=this.maxSize().width,this.cropperScaledMaxHeight=this.maxSize().height}equalsCropperPosition(i){const o=this.cropper();return null==o&&null==i||null!=o&&null!=i&&o.x1.toFixed(3)===i.x1.toFixed(3)&&o.y1.toFixed(3)===i.y1.toFixed(3)&&o.x2.toFixed(3)===i.x2.toFixed(3)&&o.y2.toFixed(3)===i.y2.toFixed(3)}equalsTransformTranslate(i){return(this.transform.translateH??0)===(i.translateH??0)&&(this.transform.translateV??0)===(i.translateV??0)}equalsTransform(i){return this.equalsTransformTranslate(i)&&(this.transform.scale??1)===(i.scale??1)&&(this.transform.rotate??0)===(i.rotate??0)&&(this.transform.flipH??!1)===(i.flipH??!1)&&(this.transform.flipV??!1)===(i.flipV??!1)}aspectRatioIsCorrect(){const i=this.cropper();return(i.x2-i.x1)/(i.y2-i.y1)===this.options.aspectRatio}resizeCropperPosition(i){(i.width!==this.maxSize().width||i.height!==this.maxSize().height)&&this.cropper.update(o=>({x1:o.x1*this.maxSize().width/i.width,x2:o.x2*this.maxSize().width/i.width,y1:o.y1*this.maxSize().height/i.height,y2:o.y2*this.maxSize().height/i.height}))}maxSizeCropperPosition(){return{x1:0,y1:0,x2:this.maxSize().width,y2:this.maxSize().height}}}var b=function(n){return n.Drag="drag",n.Move="move",n.Resize="resize",n.Pinch="pinch",n}(b||{});function tt(n,i){return n/100*i}class re{crop(i,o){const e=this.getImagePosition(i),a=e.x2-e.x1,r=e.y2-e.y1,c=document.createElement("canvas");c.width=a,c.height=r;const d=c.getContext("2d");if(!d)return null;null!=i.options.backgroundColor&&(d.fillStyle=i.options.backgroundColor,d.fillRect(0,0,a,r));const h=(i.transform.scale||1)*(i.transform.flipH?-1:1),p=(i.transform.scale||1)*(i.transform.flipV?-1:1),{translateH:x,translateV:y}=this.getCanvasTranslate(i),_=i.loadedImage.transformed;d.setTransform(h,0,0,p,_.size.width/2+x,_.size.height/2+y),d.translate(-e.x1/h,-e.y1/p),d.rotate((i.transform.rotate||0)*Math.PI/180),d.drawImage(_.image,-_.size.width/2,-_.size.height/2);const g={width:a,height:r,imagePosition:e,cropperPosition:{...i.cropper()}};i.options.containWithinAspectRatio&&(g.offsetImagePosition=this.getOffsetImagePosition(i));const v=this.getResizeRatio(a,r,i.options);return 1!==v&&(g.width=Math.round(a*v),g.height=i.options.maintainAspectRatio?Math.round(g.width/i.options.aspectRatio):Math.round(r*v),function oe(n,i,o){const e=n.width,a=n.height,r=e/(i=Math.round(i)),c=a/(o=Math.round(o)),d=Math.ceil(r/2),h=Math.ceil(c/2),p=n.getContext("2d");if(p){const x=p.getImageData(0,0,e,a),y=p.createImageData(i,o),_=x.data,g=y.data;for(let v=0;v<o;v++)for(let I=0;I<i;I++){const X=4*(I+v*i),Ce=v*c;let M=0,E=0,at=0,ot=0,rt=0,nt=0,st=0;const Me=Math.floor(I*r),ke=Math.floor(v*c);let G=Math.ceil((I+1)*r),U=Math.ceil((v+1)*c);G=Math.min(G,e),U=Math.min(U,a);for(let L=ke;L<U;L++){const ct=Math.abs(Ce-L)/h,Ie=I*r,ze=ct*ct;for(let D=Me;D<G;D++){const dt=Math.abs(Ie-D)/d,F=Math.sqrt(ze+dt*dt);if(F>=1)continue;M=2*F*F*F-3*F*F+1;const j=4*(D+L*e);st+=M*_[j+3],at+=M,_[j+3]<255&&(M=M*_[j+3]/250),ot+=M*_[j],rt+=M*_[j+1],nt+=M*_[j+2],E+=M}}g[X]=ot/E,g[X+1]=rt/E,g[X+2]=nt/E,g[X+3]=st/at}n.width=i,n.height=o,p.putImageData(y,0,0)}}(c,g.width,g.height)),"blob"===o?this.cropToBlob(g,c,i):(g.base64=c.toDataURL("image/"+i.options.format,this.getQuality(i.options)),g)}cropToBlob(i,o,e){var a=this;return(0,C.A)(function*(){return i.blob=yield new Promise(r=>o.toBlob(r,"image/"+e.options.format,a.getQuality(e.options))),i.blob&&(i.objectUrl=URL.createObjectURL(i.blob)),i})()}getCanvasTranslate(i){if("px"===i.transform.translateUnit){const o=this.getRatio(i);return{translateH:(i.transform.translateH||0)*o,translateV:(i.transform.translateV||0)*o}}return{translateH:i.transform.translateH?tt(i.transform.translateH,i.loadedImage.transformed.size.width):0,translateV:i.transform.translateV?tt(i.transform.translateV,i.loadedImage.transformed.size.height):0}}getRatio(i){return i.loadedImage.transformed.size.width/i.maxSize().width}getImagePosition(i){const o=this.getRatio(i),e=i.cropper(),a={x1:Math.round(e.x1*o),y1:Math.round(e.y1*o),x2:Math.round(e.x2*o),y2:Math.round(e.y2*o)};return i.options.containWithinAspectRatio||(a.x1=Math.max(a.x1,0),a.y1=Math.max(a.y1,0),a.x2=Math.min(a.x2,i.loadedImage.transformed.size.width),a.y2=Math.min(a.y2,i.loadedImage.transformed.size.height)),a}getOffsetImagePosition(i){const o=i.options.canvasRotation+i.loadedImage.exifTransform.rotate,e=this.getRatio(i);let a,r;o%2?(a=(i.loadedImage.transformed.size.width-i.loadedImage.original.size.height)/2,r=(i.loadedImage.transformed.size.height-i.loadedImage.original.size.width)/2):(a=(i.loadedImage.transformed.size.width-i.loadedImage.original.size.width)/2,r=(i.loadedImage.transformed.size.height-i.loadedImage.original.size.height)/2);const c=i.cropper(),d={x1:Math.round(c.x1*e)-a,y1:Math.round(c.y1*e)-r,x2:Math.round(c.x2*e)-a,y2:Math.round(c.y2*e)-r};return i.options.containWithinAspectRatio||(d.x1=Math.max(d.x1,0),d.y1=Math.max(d.y1,0),d.x2=Math.min(d.x2,i.loadedImage.transformed.size.width),d.y2=Math.min(d.y2,i.loadedImage.transformed.size.height)),d}getResizeRatio(i,o,e){const a=e.resizeToWidth/i,r=e.resizeToHeight/o,c=new Array;e.resizeToWidth>0&&c.push(a),e.resizeToHeight>0&&c.push(r);const d=0===c.length?1:Math.min(...c);return d>1&&!e.onlyScaleDown?d:Math.min(d,1)}getQuality(i){return Math.min(1,Math.max(0,i.imageQuality/100))}}const ne=[new Uint8Array([255,216,255,225,0,34,69,120,105,102,0,0,77,77,0,42,0,0,0,8,0,1,1,18,0,3,0,0,0,1,0,6,0,0,0,0,0,0,255,219,0,132,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,255,192,0,17,8,0,1,0,2,3,1,17,0,2,17,1,3,17,1,255,196,0,74,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,16,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,218,0,12,3,1,0,2,17,3,17,0,63,0,63,240,127,255,217])],se=URL.createObjectURL(new Blob(ne,{type:"image/jpeg"}));class he{constructor(){this.autoRotateSupported=function ce(){return new Promise(n=>{const i=new Image;i.onload=()=>{n(1===i.width&&2===i.height)},i.src=se})}()}loadImageFile(i,o){var e=this;return(0,C.A)(function*(){const a=yield i.arrayBuffer();return o.options.checkImageType?yield e.checkImageTypeAndLoadImageFromArrayBuffer(a,i.type,o):yield e.loadImageFromArrayBuffer(a,o)})()}checkImageTypeAndLoadImageFromArrayBuffer(i,o,e){return this.isValidImageType(o)?this.loadImageFromArrayBuffer(i,e,o):Promise.reject(new Error("Invalid image type"))}isValidImageType(i){return/image\/(png|jpg|jpeg|heic|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(i)}loadImageFromURL(i,o){var e=this;return(0,C.A)(function*(){const r=yield(yield fetch(i)).blob(),c=yield r.arrayBuffer();return yield e.loadImageFromArrayBuffer(c,o,r.type)})()}loadBase64Image(i,o){const e=this.base64ToArrayBuffer(i);return this.loadImageFromArrayBuffer(e,o)}base64ToArrayBuffer(i){i=i.replace(/^data:([^;]+);base64,/gim,"");const o=atob(i),e=o.length,a=new Uint8Array(e);for(let r=0;r<e;r++)a[r]=o.charCodeAt(r);return a.buffer}loadImageFromArrayBuffer(i,o,e){var a=this;return(0,C.A)(function*(){const r=yield new Promise(function(){var c=(0,C.A)(function*(d,h){try{const p=new Blob([i],e?{type:e}:void 0),x=URL.createObjectURL(p),y=new Image,g="image/svg+xml"===e?yield a.getSvgImageSize(p):void 0;y.onload=()=>d({originalImage:y,originalImageSize:g,originalObjectUrl:x,originalArrayBuffer:i}),y.onerror=h,y.src=x}catch(p){h(p)}});return function(d,h){return c.apply(this,arguments)}}());return yield a.transformImageFromArrayBuffer(r,o,null!=r.originalImageSize)})()}getSvgImageSize(i){return(0,C.A)(function*(){const a=(new DOMParser).parseFromString(yield i.text(),"image/svg+xml").querySelector("svg");if(!a)throw Error("Failed to parse SVG image");const r=a.getAttribute("width"),c=a.getAttribute("height");if(r&&c)return null;const d=a.getAttribute("viewBox")||a.getAttribute("viewbox");if(d){const h=d.split(" ");return{width:+h[2],height:+h[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})()}transformImageFromArrayBuffer(i,o){var e=this;return(0,C.A)(function*(a,r,c=!1){const h=function de(n){switch("object"==typeof n&&(n=function le(n){const i=new DataView(n);if(65496!==i.getUint16(0,!1))return-2;const o=i.byteLength;let e=2;for(;e<o;){if(i.getUint16(e+2,!1)<=8)return-1;const a=i.getUint16(e,!1);if(e+=2,65505==a){if(1165519206!==i.getUint32(e+=2,!1))return-1;const r=18761==i.getUint16(e+=6,!1);e+=i.getUint32(e+4,r);const c=i.getUint16(e,r);e+=2;for(let d=0;d<c;d++)if(274==i.getUint16(e+12*d,r))return i.getUint16(e+12*d+8,r)}else{if(65280&~a)break;e+=i.getUint16(e,!1)}}return-1}(n)),n){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}((yield e.autoRotateSupported)?-1:a.originalArrayBuffer);return a.originalImage&&a.originalImage.complete?e.transformLoadedImage({original:{objectUrl:a.originalObjectUrl,image:a.originalImage,size:a.originalImageSize??{width:a.originalImage.naturalWidth,height:a.originalImage.naturalHeight}},exifTransform:h},r,c):Promise.reject(new Error("No image loaded"))}).apply(this,arguments)}transformLoadedImage(i,o){var e=this;return(0,C.A)(function*(a,r,c=!1){const d=r.options.canvasRotation+a.exifTransform.rotate,h=a.original.size;if(!c&&0===d&&!a.exifTransform.flip&&!r.options.containWithinAspectRatio)return{original:{objectUrl:a.original.objectUrl,image:a.original.image,size:{...h}},transformed:{objectUrl:a.original.objectUrl,image:a.original.image,size:{...h}},exifTransform:a.exifTransform};const p=e.getTransformedSize(h,a.exifTransform,r),x=document.createElement("canvas");x.width=p.width,x.height=p.height;const y=x.getContext("2d");y?.setTransform(a.exifTransform.flip?-1:1,0,0,1,x.width/2,x.height/2),y?.rotate(Math.PI*(d/2)),y?.drawImage(a.original.image,-h.width/2,-h.height/2);const _=yield new Promise(I=>x.toBlob(I,r.options.format));if(!_)throw new Error("Failed to get Blob for transformed image.");const g=URL.createObjectURL(_),v=yield e.loadImageFromObjectUrl(g);return{original:{objectUrl:a.original.objectUrl,image:a.original.image,size:{...h}},transformed:{objectUrl:g,image:v,size:{width:v.width,height:v.height}},exifTransform:a.exifTransform}}).apply(this,arguments)}loadImageFromObjectUrl(i){return new Promise((o,e)=>{const a=new Image;a.onload=()=>o(a),a.onerror=e,a.src=i})}getTransformedSize(i,o,e){const a=e.options.canvasRotation+o.rotate;if(e.options.containWithinAspectRatio){if(a%2){const c=i.height/e.options.aspectRatio;return{width:Math.max(i.height,i.width*e.options.aspectRatio),height:Math.max(i.width,c)}}{const c=i.width/e.options.aspectRatio;return{width:Math.max(i.width,i.height*e.options.aspectRatio),height:Math.max(i.height,c)}}}return a%2?{height:i.width,width:i.height}:{width:i.width,height:i.height}}}let ue=(()=>{var n;class i{get alignImageStyle(){return this.state.options.alignImage}constructor(e){this.sanitizer=e,this.pinchStart$=new Yt.B,this.cropService=new re,this.loadImageService=new he,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.moveTypes=b,this.state=new ae,this.safeImgDataUrl=(0,s.vPA)(void 0),this.safeTransformStyle=(0,s.vPA)(void 0),this.marginLeft="0px",this.imageVisible=!1,this.allowMoveImage=!1,this.checkImageType=!0,this.disabled=!1,this.hidden=!1,this.imageCropped=(0,f.CGW)(),this.startCropImage=(0,f.CGW)(),this.imageLoaded=(0,f.CGW)(),this.cropperReady=(0,f.CGW)(),this.loadImageFailed=(0,f.CGW)(),this.transformChange=(0,f.CGW)(),this.cropperChange=(0,f.CGW)(),this.reset()}ngOnInit(){this.state.stepSize=this.initialStepSize||this.state.stepSize}ngOnChanges(e){const a=this.state.cropper(),r=this.state.transform,c=this.state.options.backgroundColor;if(this.state.setOptionsFromChanges(e),this.onChangesInputImage(e),e.transform&&this.transform&&(this.state.transform=this.transform,this.setCssTransform()),!this.state.loadedImage?.transformed.image.complete||!this.state.maxSize)return;if(this.containWithinAspectRatio&&e.aspectRatio||e.containWithinAspectRatio||e.canvasRotation)return void this.loadImageService.transformLoadedImage(this.state.loadedImage,this.state).then(h=>this.setLoadedImage(h)).catch(h=>this.loadImageError(h));e.cropper&&this.cropper&&this.state.cropper.set(A(this.cropper,this.state,!0));const d=!this.state.equalsCropperPosition(a);d&&(!this.cropper||!this.state.equalsCropperPosition(this.cropper))&&this.cropperChange.emit(this.state.cropper()),(d||!this.state.equalsTransform(r)||this.state.options.backgroundColor!==c)&&this.doAutoCrop(),e.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesInputImage(e){(e.imageChangedEvent||e.imageURL||e.imageBase64||e.imageFile)&&this.reset(),e.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),e.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),e.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),e.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){const e=this.imageChangedEvent?.target?.files;return e instanceof FileList&&e.length>0}reset(){this.state.loadedImage=void 0,this.state.maxSize.set({width:0,height:0}),this.imageVisible=!1}loadImageFile(e){this.loadImageService.loadImageFile(e,this.state).then(a=>this.setLoadedImage(a)).catch(a=>this.loadImageError(a))}loadBase64Image(e){this.loadImageService.loadBase64Image(e,this.state).then(a=>this.setLoadedImage(a)).catch(a=>this.loadImageError(a))}loadImageFromURL(e){this.loadImageService.loadImageFromURL(e,this.state).then(a=>this.setLoadedImage(a)).catch(a=>this.loadImageError(a))}setLoadedImage(e){this.state.loadedImage=e,this.safeImgDataUrl.set(this.sanitizer.bypassSecurityTrustResourceUrl(e.transformed.objectUrl))}loadImageError(e){console.error(e),this.loadImageFailed.emit()}setCssTransform(){const e=this.state.transform?.translateUnit||"%";this.safeTransformStyle.set(this.sanitizer.bypassSecurityTrustStyle(`translate(${this.state.transform.translateH||0}${e}, ${this.state.transform.translateV||0}${e}) scaleX(`+(this.state.transform.scale||1)*(this.state.transform.flipH?-1:1)+") scaleY("+(this.state.transform.scale||1)*(this.state.transform.flipV?-1:1)+") rotate("+(this.state.transform.rotate||0)+"deg)"))}imageLoadedInView(){null!=this.state.loadedImage&&(this.imageLoaded.emit(this.state.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),!this.cropper||this.maintainAspectRatio&&!this.state.aspectRatioIsCorrect()?(this.state.cropper.set(A(this.state.maxSizeCropperPosition(),this.state,!0)),this.cropperChange.emit(this.state.cropper())):(this.state.cropper.set(A(this.cropper,this.state,!0)),this.emitCropperPositionChange(this.cropper)),this.imageVisible=!0,this.cropperReady.emit(this.state.maxSize()),this.doAutoCrop()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>1}onResize(){if(this.state.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{const e=this.state.maxSize();this.setMaxSize(),this.state.resizeCropperPosition(e)}}keyboardAccess(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}changeKeyboardStepSize(e){const a=+e.key;a>=1&&a<=9&&(this.state.stepSize=a)}keyboardMoveCropper(e){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key))return;const r=e.shiftKey?b.Resize:b.Move,c=e.altKey?function pe(n){switch(n){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(e.key):function me(n){switch(n){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(e.key),d=function ge(n,i){switch(n){case"ArrowUp":return{clientX:0,clientY:-1*i};case"ArrowRight":return{clientX:i,clientY:0};case"ArrowDown":return{clientX:0,clientY:i};default:return{clientX:-1*i,clientY:0}}}(e.key,this.state.stepSize);e.preventDefault(),e.stopPropagation(),this.moveStart={type:r,position:c,clientX:0,clientY:0,transform:this.state.transform,cropper:this.state.cropper()},this.handleMouseMove(d),this.handleMouseUp()}startMove(e,a,r=null){this.disabled||this.moveStart&&this.moveStart.type===b.Pinch||a===b.Drag&&!this.allowMoveImage||("preventDefault"in e&&e.preventDefault(),this.moveStart={type:a,position:r,clientX:B(e),clientY:V(e),transform:this.state.transform,cropper:this.state.cropper()},this.initMouseMove())}initMouseMove(){(0,J.h)((0,R.R)(document,"mousemove"),(0,R.R)(document,"touchmove")).pipe((0,q.Q)((0,J.h)((0,R.R)(document,"mouseup"),(0,R.R)(document,"touchend"),this.pinchStart$).pipe((0,$t.$)()))).subscribe({next:e=>this.handleMouseMove(e),complete:()=>this.handleMouseUp()})}handleMouseMove(e){if(this.moveStart)if("stopPropagation"in e&&e.stopPropagation(),"preventDefault"in e&&e.preventDefault(),this.moveStart.type===b.Move)this.state.cropper.set(P(function ee(n,i){const o=B(n)-i.clientX,e=V(n)-i.clientY;return{x1:i.cropper.x1+o,y1:i.cropper.y1+e,x2:i.cropper.x2+o,y2:i.cropper.y2+e}}(e,this.moveStart),this.state,!0));else if(this.moveStart.type===b.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.state.cropper.set(P(Z(e,this.moveStart,this.state),this.state,!1));else if(this.moveStart.type===b.Drag){const a=B(e)-this.moveStart.clientX,r=V(e)-this.moveStart.clientY;this.state.transform={...this.state.transform,translateH:(this.moveStart.transform?.translateH||0)+a,translateV:(this.moveStart.transform?.translateV||0)+r},this.setCssTransform()}}handleMouseUp(){!this.moveStart||this.moveStart.type===b.Pinch||((!this.state.equalsCropperPosition(this.moveStart.cropper)||this.moveStart.transform&&!this.state.equalsTransform(this.moveStart.transform))&&(this.moveStart.type===b.Drag?this.transformChange.emit(this.state.transform):this.cropperChange.emit(this.state.cropper()),this.doAutoCrop()),this.moveStart=void 0)}startPinch(e){if(this.disabled||!this.sourceImageLoaded()||e.touches.length<2)return;"preventDefault"in e&&e.preventDefault();const a=this.state.cropper();this.moveStart={type:b.Pinch,position:"center",clientX:a.x1+(a.x2-a.x1)/2,clientY:a.y1+(a.y2-a.y1)/2,cropper:a},this.initPinch()}initPinch(){this.pinchStart$.next(),(0,R.R)(document,"touchmove").pipe((0,q.Q)((0,R.R)(document,"touchend"))).subscribe({next:e=>this.handlePinchMove(e),complete:()=>this.handlePinchStop()})}handlePinchMove(e){this.moveStart&&(e.preventDefault&&e.preventDefault(),this.moveStart.type===b.Pinch&&!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.state.cropper.set(P(Z(e,this.moveStart,this.state),this.state,!1)))}handlePinchStop(){this.moveStart&&(this.state.equalsCropperPosition(this.moveStart.cropper)||(this.emitCropperPositionChange(this.moveStart.cropper),this.doAutoCrop()),this.moveStart=void 0)}setMaxSize(){if(this.sourceImage){const e=getComputedStyle(this.sourceImage.nativeElement);this.state.setMaxSize(parseFloat(e.width),parseFloat(e.height)),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.state.maxSize().width/2+"px)")}}emitCropperPositionChange(e){this.state.equalsCropperPosition(e)||this.cropperChange.emit(this.state.cropper())}doAutoCrop(){this.state.options.autoCrop&&this.crop()}crop(e=this.state.options.output){if(null!=this.state.loadedImage?.transformed?.image){if(this.startCropImage.emit(),"blob"===e)return this.cropToBlob();if("base64"===e)return this.cropToBase64()}return null}cropToBlob(){var e=this;return new Promise(function(){var a=(0,C.A)(function*(r,c){const d=yield e.cropService.crop(e.state,"blob");d?(e.imageCropped.emit(d),r(d)):c("Crop image failed")});return function(r,c){return a.apply(this,arguments)}}())}cropToBase64(){const e=this.cropService.crop(this.state,"base64");return e?(this.imageCropped.emit(e),e):null}resetCropperPosition(){this.state.cropper.set(A(this.state.maxSizeCropperPosition(),this.state,!0)),this.cropperChange.emit(this.state.cropper())}ngOnDestroy(){this.pinchStart$.complete()}static#t=n=()=>(this.\u0275fac=function(a){return new(a||i)(t.rXU(K.up))},this.\u0275cmp=t.VBU({type:i,selectors:[["image-cropper"]],viewQuery:function(a,r){if(1&a&&(t.GBs(Qt,7),t.GBs(qt,5)),2&a){let c;t.mGM(c=t.lsd())&&(r.wrapper=c.first),t.mGM(c=t.lsd())&&(r.sourceImage=c.first)}},hostVars:6,hostBindings:function(a,r){1&a&&t.bIt("resize",function(){return r.onResize()},t.tSv),2&a&&(t.xc7("text-align",r.alignImageStyle),t.AVh("disabled",r.disabled)("ngx-ic-hidden",r.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",options:"options",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",autoCrop:"autoCrop",cropper:"cropper",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",checkImageType:"checkImageType",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange",cropperChange:"cropperChange"},features:[t.OA$],decls:4,vars:10,consts:[["sourceImage",""],[3,"touchstart"],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"load","mousedown","touchstart","error","src"],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left",3,"mousedown","touchstart"]],template:function(a,r){1&a&&(t.j41(0,"div",1),t.bIt("touchstart",function(d){return r.startPinch(d)}),t.DNE(1,Jt,2,8,"img",2),t.nrm(2,"div",3),t.DNE(3,Zt,3,16,"div",4),t.k0s()),2&a&&(t.xc7("background",r.imageVisible&&r.state.options.backgroundColor),t.R7$(),t.Y8G("ngIf",r.safeImgDataUrl()),t.R7$(),t.xc7("width",r.state.maxSize().width||0,"px")("height",r.state.maxSize().height||0,"px")("margin-left","center"===r.state.options.alignImage?r.marginLeft:null),t.R7$(),t.Y8G("ngIf",r.imageVisible))},dependencies:[w.bT],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{display:inline;max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:var(--cropper-color, #53535C);background:transparent;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:var(--cropper-border, 1px solid rgba(255, 255, 255, .5))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:hover   .ngx-ic-move[_ngcontent-%COMP%]{border:var(--cropper-hover-border, var(--cropper-border, 1px solid rgba(255, 255, 255, .5)))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border:var(--cropper-focus-border, 2px solid dodgerblue)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{background:var(--cropper-resize-square-focus-bg, var(--cropper-resize-square-bg, #53535C));border:var(--cropper-resize-square-focus-border, var(--cropper-resize-square-border, 1px solid rgba(255, 255, 255, .5)))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;width:6px;height:6px;box-sizing:content-box;background:var(--cropper-resize-square-bg, #53535C);border:var(--cropper-resize-square-border, 1px solid rgba(255, 255, 255, .5))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]:hover   .ngx-ic-square[_ngcontent-%COMP%]{background:var(--cropper-resize-square-hover-bg, var(--cropper-resize-square-bg, #53535C));border:var(--cropper-resize-square-hover-border, var(--cropper-resize-square-border, 1px solid rgba(255, 255, 255, .5)))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ic-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}))}return n(),i})();var et=m(7589),it=m(9330);let fe=(()=>{var n;class i{constructor(e,a){this.httpClient=e,this.apiUrl=a,console.log("upload service buha")}uploadImage(e,a){console.log("uploading image",a.get("file"));const r=`${this.apiUrl}/upload/image/${e}`;return console.log("upload url is ",r),this.httpClient.post(r,a)}static#t=n=()=>(this.\u0275fac=function(a){return new(a||i)(s.KVO(it.Qq),s.KVO("endPointURL"))},this.\u0275prov=s.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}))}return n(),i})();const _e=["fileInput"];function ve(n,i){if(1&n){const o=t.RV6();t.j41(0,"section")(1,"div",11)(2,"button",12),t.bIt("click",function(){s.eBV(o);const a=t.XpG(3);return s.Njj(a.openFileInput())}),t.EFF(3," Edit "),t.k0s(),t.j41(4,"div",13),t.nrm(5,"img",14),t.k0s()()()}if(2&n){const o=t.XpG(2);t.R7$(5),t.Y8G("src",o.image,t.B4B)}}function be(n,i){if(1&n){const o=t.RV6();t.j41(0,"section")(1,"div",15)(2,"button",16),t.bIt("click",function(){s.eBV(o);const a=t.XpG(3);return s.Njj(a.openFileInput())}),t.EFF(3," Upload File "),t.k0s()()()}}function xe(n,i){if(1&n&&t.nVh(0,ve,6,1,"section")(1,be,4,0,"section"),2&n){const o=t.XpG();t.vxM(o.image?0:1)}}function ye(n,i){if(1&n){const o=t.RV6();t.j41(0,"div",1)(1,"section",2)(2,"div",3)(3,"button",4),t.EFF(4,"Back"),t.k0s(),t.j41(5,"h2",5),t.EFF(6),t.k0s()(),t.nrm(7,"div"),t.k0s(),t.nVh(8,xe,2,1),t.j41(9,"section")(10,"div",6)(11,"image-cropper",7),t.bIt("imageCropped",function(a){s.eBV(o);const r=t.XpG();return s.Njj(r.imageCropped(a))})("imageLoaded",function(a){s.eBV(o);const r=t.XpG();return s.Njj(r.imageLoaded(a))})("cropperReady",function(){s.eBV(o);const a=t.XpG();return s.Njj(a.cropperReady())})("loadImageFailed",function(){s.eBV(o);const a=t.XpG();return s.Njj(a.loadImageFailed())}),t.k0s(),t.j41(12,"div",8)(13,"button",9),t.bIt("click",function(){const a=s.eBV(o),r=t.XpG();return s.Njj(r.uploadFile(a.id))}),t.EFF(14," Upload "),t.k0s()()()(),t.j41(15,"input",10,0),t.bIt("change",function(a){s.eBV(o);const r=t.XpG();return s.Njj(r.fileChangeEvent(a))}),t.k0s()()}if(2&n){const o=i,e=t.XpG();t.R7$(6),t.Lme(" ",o.name,"/ ",o.id," "),t.R7$(2),t.vxM(e.croppedImage?-1:8),t.R7$(3),t.Y8G("imageChangedEvent",e.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1),t.R7$(2),t.Y8G("disabled",null===e.croppedImageBlob)}}const we=[{path:"",component:Q},{path:":id",component:(()=>{var n;class i{constructor(e,a,r,c,d,h){this.store=e,this.activatedRoute=a,this.sanitizer=r,this.uploadService=c,this.http=d,this.router=h,this.selectedProduct$=this.activatedRoute.params.pipe((0,Ht.T)(p=>p.id),(0,Nt.n)(p=>this.store.select((0,u.l5)(p)))),this.imageChangedEvent=null,this.croppedImage="",this.croppedImageBlob=null,this.uploadErrorMessage="",console.log("am i refershing now..")}openFileInput(){this.fileInput.nativeElement.click()}fileChangeEvent(e){this.imageChangedEvent=e}imageCropped(e){this.croppedImage=this.sanitizer.bypassSecurityTrustUrl(e.objectUrl||e.base64||""),this.croppedImageBlob=e.blob??null}imageLoaded(e){}cropperReady(){}loadImageFailed(){}getSanitizedUrl(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}uploadFile(e){console.log("updload file mthod");const a=new FormData;this.croppedImageBlob&&(a.append("file",this.croppedImageBlob,"productImage"),this.uploadService.uploadImage(e,a).subscribe({next:r=>{this.uploadErrorMessage="",this.store.dispatch((0,u.HB)()),this.croppedImageBlob=null,this.imageChangedEvent=null,this.router.navigate(["shell/office/product"])},error:r=>{console.log("error occurred while uploading"),this.uploadErrorMessage="Error while uploading image, try again."}}))}createFormData(){var e=this;return(0,C.A)(function*(){const a=new FormData;e.croppedImageBlob&&(a.append("file",e.croppedImageBlob,"productImage"),yield fetch("http://localhost:3000/upload/image",{method:"POST",body:a}))})()}onImageError(){console.log("image ierror")}static#t=n=()=>(this.\u0275fac=function(a){return new(a||i)(t.rXU(T.il),t.rXU(et.nX),t.rXU(K.up),t.rXU(fe),t.rXU(it.Qq),t.rXU(et.Ix))},this.\u0275cmp=t.VBU({type:i,selectors:[["hotel-product-detail"]],viewQuery:function(a,r){if(1&a&&t.GBs(_e,5),2&a){let c;t.mGM(c=t.lsd())&&(r.fileInput=c.first)}},decls:2,vars:3,consts:[["fileInput",""],[1,"container","mx-auto"],[1,"mb-4","flex","justify-between"],[1,"flex","gap-3","items-center"],[1,"bg-gray-300","rounded-lg","p-2",3,"routerLink"],[1,"text-2xl","font-semibold"],[1,"w-full","space-y-3"],["format","png",3,"imageCropped","imageLoaded","cropperReady","loadImageFailed","imageChangedEvent","maintainAspectRatio","aspectRatio"],[1,"text-right"],[1,"bg-green-900","text-white","p-2","rounded-lg","disabled:bg-gray-600",3,"click","disabled"],["type","file",1,"hidden",3,"change"],[1,"relative","overflow-hidden","group"],[1,"hidden","group-hover:block","p-5","rounded-full","absolute","right-1","top-1","bg-gray-500/50",3,"click"],[1,"aspect-video","rounded-sm","flex","items-center","justify-center","bg-gradient-to-r","from-gray-400","to-gray-600"],["alt","",3,"src"],[1,"w-full","rounded-sm","h-72","flex","items-center","justify-center","bg-gradient-to-r","from-gray-400","to-gray-600"],[1,"bg-gray-800","text-white","rounded-lg","p-2",3,"click"]],template:function(a,r){if(1&a&&(t.nVh(0,ye,17,7,"div",1),t.nI1(1,"async")),2&a){let c;t.vxM((c=t.bMT(1,1,r.selectedProduct$))?0:-1,c)}},dependencies:[w.MD,O.iI,O.Wk,ue,w.Jj],encapsulation:2}))}return n(),i})()}]}}]);