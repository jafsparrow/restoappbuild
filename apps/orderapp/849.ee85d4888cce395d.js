"use strict";(self.webpackChunkorderapp=self.webpackChunkorderapp||[]).push([[849],{6849:(Ze,Z,l)=>{l.r(Z),l.d(Z,{OrderappOrderFeaturePageComponent:()=>I,orderRoutes:()=>Te});var c=l(6814),s=l(8866),p=l(1528),u=l(9347),g=l(3317),y=l(617),m=l(7988),U=l(1963),h=l(3305),x=l(9135),C=l(4625),v=l(8995),e=l(9212),f=l(4221),O=l(7850);function N(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){const d=e.CHM(t).ngIf,a=e.oxw(2);return e.KtG(a.addNewItemsToTheOrder(d))}),e._uU(1," ADD "),e.qZA()}}function D(i,o){if(1&i&&(e.ynx(0),e.YNc(1,N,2,0,"div",1),e.ALo(2,"async"),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.selectSignedUser$))}}let b=(()=>{class i{constructor(t,r,n){this.store=t,this.dialog=r,this.router=n,this.selectSignedUser$=this.store.select(x.JS)}get canNewItemBeAddedToOrder(){return!!this.order&&(this.order.orderStatus==p.iF.INPROGRESS||this.order.orderStatus==p.iF.PLACED)}addNewItemsToTheOrder(t){if(!this.canUserAddNewOrder(t))return;const r=this.order;if(!r.customer)return;this.store.dispatch((0,v.LL)()),this.store.dispatch((0,s.loadOrderDetails)({orderId:r.id}));const n=r.customer;this.store.dispatch((0,v.mB)({user:{firstName:n.firstName,lastName:n.lastName,userType:r.orderType==p.FW.TABLE?p.FW.TABLE:p.FW.TAKEAWAY},tableId:r.tableId?r.tableId:0,customerId:n?n.id:0,existingOrderId:r.id})),this.dialog.closeAll(),this.router.navigate(["shell/home"])}canUserAddNewOrder(t){return!(!t.isCashier&&this.order.createdUserId!==t.id)}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(f.yh),e.Y36(u.uw),e.Y36(O.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["hotel-orderapp-order-feature-add-more-item-button"]],inputs:{order:"order"},standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[[4,"ngIf"],["class","inline-block bg-pink-700 px-2 py-1 rounded-md text-right cursor-pointer text-white",3,"click",4,"ngIf"],[1,"inline-block","bg-pink-700","px-2","py-1","rounded-md","text-right","cursor-pointer","text-white",3,"click"]],template:function(r,n){1&r&&e.YNc(0,D,3,3,"ng-container",0),2&r&&e.Q6J("ngIf",n.canNewItemBeAddedToOrder)},dependencies:[c.ez,c.O5,c.Ov]})}return i})();var P=l(5362),_=l(6223);function q(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(){const d=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.changeNoteClick(d))}),e.TgZ(1,"div",18),e._uU(2),e.ALo(3,"decimalpointpipe"),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,t))}}const E=i=>({"bg-green-600 text-white":i});function M(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){const d=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.selectPaymentMode(d))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit,r=e.oxw();e.Q6J("ngClass",e.VKq(2,E,r.activePaymentMode===t)),e.xp6(1),e.hij(" ",t," ")}}const J=()=>[.5,1,5,10,20,50];let L=(()=>{class i{constructor(t,r,n){this.decimalPipe=t,this.store=r,this.dialog=n,this.selectOrderDetailsOfSelectedOrder$=this.store.select(s.selectOrderDetailsOfSelectedOrder),this.order=null,this.total=0,this.paymentModes=["Cash","Card"],this.activePaymentMode="",this.payEntrycontrol=new _.NI(0),this.shouldApplyDiscountControl=new _.NI(!1),this.discountAppliedControl=new _.NI(0),this.activePaymentMode="Cash",this.orderSubscription$=this.selectOrderDetailsOfSelectedOrder$.subscribe(d=>{d&&(this.order=d,this.total=this.decimalPipe.transform(d.taxedTotal??d.totalAmount),this.payEntrycontrol.setValue(+this.total),this.shouldApplyDiscountControl.setValue(!1),this.discountAppliedControl.setValue(this.decimalPipe.transform(this.total%1)))})}changeNoteClick(t){if(console.log("touched value",this.payEntrycontrol.touched),!this.payEntrycontrol.touched)return this.payEntrycontrol.setValue(t),void this.payEntrycontrol.markAsTouched();this.payEntrycontrol.setValue(this.payEntrycontrol.value+t)}get balance(){let t=this.total-this.payEntrycontrol.value;return this.shouldApplyDiscountControl.value&&(t-=this.discountAppliedControl.value),t<0?Math.abs(t):0}selectPaymentMode(t){if(this.activePaymentMode=t,"Cash"!==this.activePaymentMode)return this.disablePaymentEntryField();this.payEntrycontrol.enable()}disablePaymentEntryField(){this.payEntrycontrol.disable()}get canSubmit(){return"Cash"===this.activePaymentMode&&!(+this.payEntrycontrol.value+(this.shouldApplyDiscountControl.value?+this.discountAppliedControl.value:0)>=+this.total)}submitPayment(){if("Credit"===this.activePaymentMode)return;const n={paidAmount:this.payEntrycontrol.value,discount:this.shouldApplyDiscountControl.value?this.discountAppliedControl.value:0,balance:this.balance,mode:this.activePaymentMode.toLowerCase()};this.order&&this.makePayment(this.order,n)}ngOnDestroy(){this.orderSubscription$.unsubscribe()}makePayment(t,r){this.openDialog().afterClosed().subscribe(n=>{this.store.dispatch((0,s.payTheOrder)("yes"===n?{orderId:t.id,shouldPrint:!0,paymentDetails:r}:{orderId:t.id,shouldPrint:!1,paymentDetails:r}))})}creditSettleOrder(t){confirm("CREDIT settle the order")&&this.openDialog().afterClosed().subscribe(r=>{this.store.dispatch((0,s.creditTheOrder)("yes"===r?{orderId:t.id,shouldPrint:!0}:{orderId:t.id,shouldPrint:!1}))})}printBill(t){this.store.dispatch((0,s.printBillForOrder)({orderId:t.id}))}canPayTheBill(t,r){return"paid"!==t.paymentStatus&&r.isCashier}canMakeQwikPay(t){return t.isCashier}openDialog(){return this.dialog.open(C.z,{data:{title:"Print Bill",content:"Click Print to print Bill",okBtnText:"PRINT"},disableClose:!0})}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(g.iM),e.Y36(f.yh),e.Y36(u.uw))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["lib-order-payment-entry"]],standalone:!0,features:[e._Bn([g.iM]),e.jDz],decls:25,vars:10,consts:[[1,"bg-white","p-2","rounded-md"],[1,""],[1,"py-2","flex"],["type","number",1,"h-16","rounded-full","rounded-r-none","border","p-4","text-xl","w-1/3",3,"formControl"],[1,"h-16","p-4","pr-6","bg-gray-100","border","text-green-500","flex","items-center","justify-center","w-1/3"],[1,"flex","gap-2","items-center","justify-center"],["type","checkbox","name","include","id","1",1,"sm:h-8","sm:w-8","h-4","w-4",3,"formControl"],[1,"text-xs","text-neutral-500"],["type","text",1,"bg-transparent","text-lg","w-16",3,"formControl"],[1,"rounded-full","rounded-l-none","h-16","p-4","pr-6","bg-gray-200","text-green-500","flex","items-center","justify-center","w-1/3"],[1,"text-lg"],[1,"flex","py-4","gap-2","flex-wrap"],["class","w-20 h-12 border rounded-md bg-white flex justify-center items-center",3,"click",4,"ngFor","ngForOf"],[1,"flex","flex-wrap","gap-2"],["class","flex items-center justify-center text-2xl uppercase cursor-pointer hover:scale-105 duration-300 h-16 p-2 border rounded-md flex-1",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mt-6","sm:text-right"],[1,"py-3","px-5","rounded-full","bg-slate-900","text-white","w-full","sm:w-fit","disabled:bg-slate-500","disabled:text-gray-100",3,"disabled","click"],[1,"w-20","h-12","border","rounded-md","bg-white","flex","justify-center","items-center",3,"click"],[1,"bg-white"],[1,"flex","items-center","justify-center","text-2xl","uppercase","cursor-pointer","hover:scale-105","duration-300","h-16","p-2","border","rounded-md","flex-1",3,"ngClass","click"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"input",3),e.TgZ(4,"div",4)(5,"div",5),e._UZ(6,"input",6),e.TgZ(7,"div")(8,"div",7),e._uU(9,"Discount"),e.qZA(),e._UZ(10,"input",8),e.qZA()()(),e.TgZ(11,"div",9)(12,"div")(13,"div",7),e._uU(14,"Balance"),e.qZA(),e.TgZ(15,"div",10),e._uU(16),e.ALo(17,"decimalpointpipe"),e.qZA()()()(),e.TgZ(18,"div",11),e.YNc(19,q,4,3,"div",12),e.qZA()(),e.TgZ(20,"div",13),e.YNc(21,M,2,4,"div",14),e.qZA(),e.TgZ(22,"div",15)(23,"button",16),e.NdJ("click",function(){return n.submitPayment()}),e._uU(24," Confirm "),e.qZA()()()),2&r&&(e.xp6(3),e.Q6J("formControl",n.payEntrycontrol),e.xp6(3),e.Q6J("formControl",n.shouldApplyDiscountControl),e.xp6(4),e.Q6J("formControl",n.discountAppliedControl),e.xp6(6),e.Oqu(e.lcZ(17,7,n.balance)),e.xp6(3),e.Q6J("ngForOf",e.DdM(9,J)),e.xp6(2),e.Q6J("ngForOf",n.paymentModes),e.xp6(2),e.Q6J("disabled",n.canSubmit))},dependencies:[c.ez,c.mk,c.sg,u.Is,_.UX,_.Fj,_.wV,_.Wl,_.JJ,_.oH,g.iM],changeDetection:0})}return i})();function S(i,o){1&i&&(e.TgZ(0,"div",4),e._uU(1," Loading.... "),e.qZA())}function Q(i,o){1&i&&(e.TgZ(0,"div",44)(1,"span",45),e._uU(2,"Loading..."),e.qZA()())}function $(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3).ngIf,d=e.oxw(2);return e.KtG(d.makePayment(n))}),e._uU(1," PAY "),e.qZA()}}function Y(i,o){1&i&&(e.TgZ(0,"div",50),e._uU(1," Printing... "),e.qZA())}function B(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3).ngIf,d=e.oxw(2);return e.KtG(d.printBill(n))}),e._uU(1," PRINT "),e.qZA()}}function K(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,$,2,0,"div",46)(2,Y,2,0,"div",47),e.ALo(3,"async"),e.YNc(4,B,2,0,"ng-template",null,48,e.W1O),e.qZA(),e._UZ(6,"hotel-orderapp-order-feature-add-more-item-button")),2&i){const t=e.MAs(5),r=e.oxw(2).ngIf,n=e.oxw().ngIf,d=e.oxw();e.xp6(1),e.Q6J("ngIf",d.canPayTheBill(r,n)),e.xp6(1),e.Q6J("ngIf",!0===e.lcZ(3,3,d.selectPrintOrderSpinner$))("ngIfElse",t)}}function H(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Q,3,0,"div",42),e.ALo(2,"async"),e.ALo(3,"async"),e.YNc(4,K,7,5,"ng-template",null,43,e.W1O),e.qZA()),2&i){const t=e.MAs(5),r=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!0===e.lcZ(2,2,r.selectMakeBillSpinner$)||!0===e.lcZ(3,4,r.selectPayTheOrderSpinner$))("ngIfElse",t)}}function j(i,o){if(1&i&&(e.TgZ(0,"button",52)(1,"div"),e.O4$(),e.TgZ(2,"svg",53)(3,"g"),e._UZ(4,"path",54),e.qZA()()()()),2&i){e.oxw();const t=e.MAs(27);e.Q6J("matMenuTriggerFor",t)}}function z(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",57),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3).ngIf,d=e.oxw(2);return e.KtG(d.makePayment(n))}),e._uU(1," QUICK PAY "),e.qZA()}}function R(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,z,2,0,"div",56),e.qZA()),2&i){const t=o.ngIf,r=e.oxw(4);e.xp6(1),e.Q6J("ngIf",r.canMakeQwikPay(t))}}function G(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",58),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).ngIf,d=e.oxw(2);return e.KtG(d.makeBillForOrder(n))}),e._uU(1," MAKE BILL "),e.qZA()}}function V(i,o){if(1&i&&(e.YNc(0,R,2,1,"div",0),e.ALo(1,"async"),e.YNc(2,G,2,0,"div",55)),2&i){const t=e.oxw().ngIf,r=e.oxw(2);e.Q6J("ngIf",e.lcZ(1,2,r.selectSignedUser$)),e.xp6(2),e.Q6J("ngIf","served"!==t.orderStatus)}}function W(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",26)(2,"div",59),e._uU(3),e.qZA(),e.TgZ(4,"div",60)(5,"div"),e._uU(6),e.qZA()(),e.TgZ(7,"div",61),e._uU(8),e.qZA(),e.TgZ(9,"div",62),e._uU(10),e.ALo(11,"decimalpointpipe"),e.qZA()()()),2&i){const t=o.$implicit,r=o.index;e.xp6(3),e.Oqu(r+1),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.count),e.xp6(2),e.hij(" ",e.lcZ(11,4,t.amount*t.count)," ")}}function X(i,o){if(1&i&&(e.TgZ(0,"div",33),e._UZ(1,"div",34),e.TgZ(2,"div",35),e._uU(3),e.qZA(),e.TgZ(4,"div",35),e._uU(5),e.ALo(6,"decimalpointpipe"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.taxName),e.xp6(2),e.hij(" ",e.lcZ(6,2,t.value)," ")}}function ee(i,o){if(1&i&&(e.TgZ(0,"div",63)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.ALo(7,"timesago"),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA()()),2&i){const t=o.$implicit,r=e.oxw(3);e.Q6J("ngClass",r.kotBackgroundClass(t.status)),e.xp6(2),e.hij("KOT NO: ",t.id,""),e.xp6(2),e.Oqu(t.Kitchen.name),e.xp6(2),e.Oqu(e.lcZ(7,5,t.updatedAt)),e.xp6(3),e.Oqu(t.status)}}function te(i,o){1&i&&(e.TgZ(0,"div",64),e._UZ(1,"lib-order-payment-entry"),e.qZA())}function re(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),e._uU(4),e.qZA(),e.TgZ(5,"div",9),e._uU(6),e.ALo(7,"timesago"),e.qZA(),e._UZ(8,"div",10),e.TgZ(9,"div",11),e._uU(10),e.ALo(11,"decimalpointpipe"),e.qZA()(),e.TgZ(12,"div",12)(13,"div",10)(14,"div",13),e._uU(15," Type: "),e.TgZ(16,"span",14),e._uU(17),e.qZA()(),e.TgZ(18,"div",15),e._uU(19),e.qZA()(),e.TgZ(20,"div",16)(21,"div",17),e._UZ(22,"hotel-orderapp-order-feature-add-more-item-button",18),e.qZA(),e.YNc(23,H,6,6,"div",19),e.TgZ(24,"div",20),e.YNc(25,j,5,1,"button",21),e.TgZ(26,"mat-menu",null,22)(28,"button",23),e.NdJ("click",function(){const d=e.CHM(t).ngIf,a=e.oxw(2);return e.KtG(a.cancelOrderClicked(d))}),e.TgZ(29,"span"),e._uU(30,"Cancel Order"),e.qZA()()()()(),e.YNc(31,V,3,4,"ng-template",null,24,e.W1O),e.qZA(),e.TgZ(33,"div",25)(34,"div",26)(35,"div",27),e._uU(36,"SNO:"),e.qZA(),e.TgZ(37,"div",28),e._uU(38,"Item Name:"),e.qZA(),e.TgZ(39,"div",29),e._uU(40,"Qty:"),e.qZA(),e.TgZ(41,"div",30),e._uU(42,"Tot:"),e.qZA()(),e.YNc(43,W,12,6,"div",31),e._UZ(44,"div",32),e.TgZ(45,"div",33),e._UZ(46,"div",34),e.TgZ(47,"div",35),e._uU(48,"Bill Total"),e.qZA(),e.TgZ(49,"div",35),e._uU(50),e.ALo(51,"decimalpointpipe"),e.qZA()(),e.YNc(52,X,7,4,"div",36),e.TgZ(53,"div",33),e._UZ(54,"div",34),e.TgZ(55,"div",35),e._uU(56,"Net Total"),e.qZA(),e.TgZ(57,"div",35),e._uU(58),e.ALo(59,"decimalpointpipe"),e.qZA()()()(),e.TgZ(60,"div",37)(61,"mat-expansion-panel")(62,"mat-expansion-panel-header")(63,"mat-panel-title"),e._uU(64,"Kitchen Orders"),e.qZA()(),e.TgZ(65,"div",38)(66,"div",39),e.YNc(67,ee,10,7,"div",40),e.qZA()()()(),e.YNc(68,te,2,0,"div",41),e.qZA()}if(2&i){const t=o.ngIf,r=e.MAs(32),n=e.oxw().ngIf,d=e.oxw();e.xp6(4),e.hij(" Order - ",t.orderNumber," "),e.xp6(2),e.hij(" ",e.lcZ(7,15,t.createdAt)," "),e.xp6(4),e.hij(" ",e.lcZ(11,17,t.totalAmount)," "),e.xp6(7),e.Oqu(t.orderType),e.xp6(2),e.hij(" Customer: ",t.customerName," "),e.xp6(3),e.Q6J("order",t),e.xp6(1),e.Q6J("ngIf","served"===t.orderStatus)("ngIfElse",r),e.xp6(2),e.Q6J("ngIf",n.isCashier),e.xp6(18),e.Q6J("ngForOf",t.orderItems),e.xp6(7),e.hij(" ",e.lcZ(51,19,t.totalAmount)," "),e.xp6(2),e.Q6J("ngForOf",t.appliedTaxes),e.xp6(6),e.hij(" ",e.lcZ(59,21,t.taxedTotal)," "),e.xp6(9),e.Q6J("ngForOf",t.kot),e.xp6(1),e.Q6J("ngIf",d.canMakeQwikPay(n))}}function ie(i,o){1&i&&(e.TgZ(0,"div",65),e._uU(1," No order selected, Please select an order to view "),e.qZA())}function ne(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,S,2,0,"div",1),e.ALo(2,"async"),e.YNc(3,re,69,23,"div",2),e.ALo(4,"async"),e.YNc(5,ie,2,0,"ng-template",null,3,e.W1O),e.qZA()),2&i){const t=e.MAs(6),r=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,r.selectOrderDetailsLoadSpinner$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,5,r.selectOrderDetailsOfSelectedOrder$))("ngIfElse",t)}}let F=(()=>{class i{constructor(t,r){this.store=t,this.dialog=r,this.selectOrderDetailsLoadSpinner$=this.store.select(s.selectLoadOrderDetailSpinner),this.selectOrderDetailsOfSelectedOrder$=this.store.select(s.selectOrderDetailsOfSelectedOrder),this.selectMakeBillSpinner$=this.store.select(s.selectMakeBillSpinner),this.selectPrintOrderSpinner$=this.store.select(s.selectPrintOrderSpinner),this.selectPayTheOrderSpinner$=this.store.select(s.selectPayTheOrderSpinner),this.selectSignedUser$=this.store.select(x.JS)}makeBillForOrder(t){this.store.dispatch((0,s.makeBillForOrder)({orderId:t.id})),this.dialog.open(U.J,{width:"100%"})}makePayment(t){this.openDialog().afterClosed().subscribe(r=>{this.store.dispatch((0,s.payTheOrder)("yes"===r?{orderId:t.id,shouldPrint:!0,paymentDetails:{paidAmount:22,discount:0,balance:0,mode:"cash"}}:{orderId:t.id,shouldPrint:!1,paymentDetails:{paidAmount:22,discount:0,balance:0,mode:"cash"}}))})}creditSettleOrder(t){confirm("CREDIT settle the order")&&this.openDialog().afterClosed().subscribe(r=>{this.store.dispatch((0,s.creditTheOrder)("yes"===r?{orderId:t.id,shouldPrint:!0}:{orderId:t.id,shouldPrint:!1}))})}printBill(t){this.store.dispatch((0,s.printBillForOrder)({orderId:t.id}))}canPayTheBill(t,r){return"paid"!==t.paymentStatus&&r.isCashier}canMakeQwikPay(t){return t.isCashier}openDialog(){return this.dialog.open(C.z,{data:{title:"Print Bill",content:"Click Print to print Bill",okBtnText:"PRINT"},disableClose:!0})}creditPayClicked(t){return"helo"}cancelOrderClicked(t){this.dialog.open(P.v)}kotBackgroundClass(t){let r="bg-green-200";switch(t){case p.zL.READY:r="bg-green-200";break;case p.zL.INPROGRESS:r="bg-orange-200"}return r}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(f.yh),e.Y36(u.uw))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["hotel-orderapp-order-feature-order-detail"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[4,"ngIf"],["class","h-screen flex items-center justify-center",4,"ngIf"],["class","bg-gray-100 p-2 w-full",4,"ngIf","ngIfElse"],["noOrderSelected",""],[1,"h-screen","flex","items-center","justify-center"],[1,"bg-gray-100","p-2","w-full"],[1,"rounded-md","bg-white","p-2"],[1,"flex","w-full","flex-row","items-stretch"],[1,"font-bold","capitalize"],[1,"ml-2","border-l-2","pl-2","font-light"],[1,"flex-grow"],[1,"font-semibold"],[1,"flex","flex-row"],[1,"font-semibod"],[1,"font-light"],[1,"font-thin"],[1,"flex","flex-col","sm:flex-row","gap-4"],[1,""],[3,"order"],[4,"ngIf","ngIfElse"],[1,"text-right"],["mat-icon-button","","class","",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click"],["makeBillOrQuickPay",""],[1,"mt-2","border","border-gray-400","p-2","max-w-md","max-h-sm","overflow-y-auto"],[1,"grid","grid-cols-12","gap-2","py-1"],[1,"col-span-1","text-xs","font-bold"],[1,"col-span-6","text-xs","font-bold"],[1,"col-span-3","text-xs","font-bold"],[1,"col-span-2","text-xs","font-bold"],[4,"ngFor","ngForOf"],[1,"my-2","h-[1px]","w-full","bg-gray-600"],[1,"grid","grid-cols-4","pt-2"],[1,"col-span-2"],[1,"col-span-1"],["class","grid grid-cols-4 pt-2",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"bg-white","rounded-lg"],[1,"space-y-1"],["class","flex gap-3 p-1 justify-between font-semibold",3,"ngClass",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["role","status",4,"ngIf","ngIfElse"],["actionButtons",""],["role","status"],[1,"sr-only"],["class","inline-block h-7 rounded-md bg-purple-900 p-1 text-right text-sm text-white cursor-pointer",3,"click",4,"ngIf"],["class","inline-block h-7 rounded-md bg-gray-400 p-1 text-right text-sm text-white cursor-pointer",4,"ngIf","ngIfElse"],["printBilldiv",""],[1,"inline-block","h-7","rounded-md","bg-purple-900","p-1","text-right","text-sm","text-white","cursor-pointer",3,"click"],[1,"inline-block","h-7","rounded-md","bg-gray-400","p-1","text-right","text-sm","text-white","cursor-pointer"],[1,"inline-block","h-7","rounded-md","bg-green-700","ml-2","p-1","px-2","text-right","text-sm","text-white","cursor-pointer",3,"click"],["mat-icon-button","",1,"",3,"matMenuTriggerFor"],["version","1.1","id","Layer_1","x","0px","y","0px","width","13px","height","20px","viewBox","0 0 29.957 122.88","enable-background","new 0 0 29.957 122.88",0,"xml","space","preserve","fill","#000"],["fill-rule","evenodd","clip-rule","evenodd","d","M14.978,0c8.27,0,14.979,6.708,14.979,14.979c0,8.27-6.709,14.976-14.979,14.976 C6.708,29.954,0,23.249,0,14.979C0,6.708,6.708,0,14.978,0L14.978,0z M14.978,92.926c8.27,0,14.979,6.708,14.979,14.979 s-6.709,14.976-14.979,14.976C6.708,122.88,0,116.175,0,107.904S6.708,92.926,14.978,92.926L14.978,92.926z M14.978,46.463 c8.27,0,14.979,6.708,14.979,14.979s-6.709,14.978-14.979,14.978C6.708,76.419,0,69.712,0,61.441S6.708,46.463,14.978,46.463 L14.978,46.463z"],["class","inline-block h-7 rounded-md bg-blue-700 p-1 text-right text-sm text-white cursor-pointer",3,"click",4,"ngIf"],["class","h-7 rounded-md bg-blue-700 p-1 px-2 text-center text-sm text-white cursor-pointer",3,"click",4,"ngIf"],[1,"h-7","rounded-md","bg-blue-700","p-1","px-2","text-center","text-sm","text-white","cursor-pointer",3,"click"],[1,"inline-block","h-7","rounded-md","bg-blue-700","p-1","text-right","text-sm","text-white","cursor-pointer",3,"click"],[1,"col-span-1","text-xs"],[1,"col-span-6","text-xs"],[1,"col-span-3","text-xs"],[1,"col-span-2","text-xs"],[1,"flex","gap-3","p-1","justify-between","font-semibold",3,"ngClass"],[1,"mt-2"],[1,"h-full","flex","justify-center","items-center"]],template:function(r,n){1&r&&(e.YNc(0,ne,7,7,"div",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,n.selectSignedUser$))},dependencies:[c.ez,c.mk,c.sg,c.O5,c.Ov,u.Is,b,g.UU,y.Ps,m.Tx,m.VK,m.OP,m.p6,L,g.iM,h.To,h.ib,h.yz,h.yK]})}return i})();var A=l(9213),w=l(1646);const T=i=>({"bg-red-600 text-white":i});function oe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("click",function(){const d=e.CHM(t).$implicit,a=e.oxw(3);return e.KtG(a.setFloorFilter(d.name))}),e.TgZ(1,"div",10),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit,r=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(2,T,t.name===r.selectedFilterText)),e.xp6(1),e.hij(" ",t.name," ")}}function de(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){const d=e.CHM(t).$implicit,a=e.oxw(3);return e.KtG(a.setUserNameFilter(d))}),e.TgZ(1,"div",10)(2,"span",17),e._uU(3),e.qZA(),e._uU(4," |"),e.TgZ(5,"span",18),e._uU(6),e.qZA()()()}if(2&i){const t=o.$implicit,r=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(3,T,r.selectedFilterText==="filterForCreatedUser$"+t.name)),e.xp6(2),e.Oqu(t.name),e.xp6(3),e.Oqu(t.count)}}function se(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.setFloorFilter(""))}),e._uU(1," Clear "),e.qZA()}}function le(i,o){1&i&&(e.TgZ(0,"div",20),e._uU(1,"All orders are settled."),e.qZA())}function ce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,d=e.oxw(3);return e.KtG(d.openOrderDetailEdit(n))}),e._uU(1," EDIT "),e.qZA()}}const ae=i=>({"bg-green-100":i});function pe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",21)(2,"div",22)(3,"div",23),e._uU(4),e.qZA(),e.TgZ(5,"div",24),e._uU(6),e.ALo(7,"timesago"),e.qZA(),e._UZ(8,"div",2),e.qZA(),e.TgZ(9,"div",25)(10,"div",2)(11,"div",26)(12,"span",27),e._uU(13),e.qZA()(),e.TgZ(14,"div",28),e._uU(15),e.qZA()(),e.TgZ(16,"div",29),e._UZ(17,"hotel-orderapp-order-feature-add-more-item-button",30),e.qZA(),e.YNc(18,ce,2,0,"div",31),e.TgZ(19,"div",32),e.NdJ("click",function(){const d=e.CHM(t).$implicit,a=e.oxw(3);return e.KtG(a.loadOrderDetail(d))}),e._uU(20," VIEW "),e.qZA(),e.TgZ(21,"div",33),e.NdJ("click",function(){const d=e.CHM(t).$implicit,a=e.oxw(3);return e.KtG(a.openOrderDetail(d))}),e._uU(22," VIEW "),e.qZA()(),e.TgZ(23,"div",34),e._uU(24),e.qZA()()()}if(2&i){const t=o.$implicit,r=e.oxw(2).ngIf,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(10,ae,t.id===(r.temp?r.temp.id:-1))),e.xp6(3),e.hij("Order ",t.orderNumber,""),e.xp6(2),e.hij(" ",e.lcZ(7,8,t.createdAt)," "),e.xp6(7),e.Oqu("table"===t.orderType?"Dine In":t.orderType),e.xp6(2),e.Oqu(n.displayCustomerOrTableName(t)),e.xp6(2),e.Q6J("order",t),e.xp6(1),e.Q6J("ngIf",n.canEditOrder(t)),e.xp6(6),e.Oqu(t.user.name)}}function ue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e.YNc(2,oe,3,4,"div",8),e.ALo(3,"async"),e.TgZ(4,"div",9),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.setFloorFilter("filterForTakeAwayAsFloorName"))}),e.TgZ(5,"div",10),e._uU(6," Take Away "),e.qZA()(),e.YNc(7,de,7,5,"div",11),e.ALo(8,"async"),e._UZ(9,"div",12),e.YNc(10,se,2,0,"div",13),e.qZA(),e.YNc(11,le,2,0,"div",14)(12,pe,25,12,"div",15),e.qZA()}if(2&i){const t=o.ngIf,r=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,6,r.selectFloors$)),e.xp6(3),e.Q6J("ngClass",e.VKq(10,T,"filterForTakeAwayAsFloorName"===r.selectedFilterText)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(8,8,r.selectorderCreatedUserNames$)),e.xp6(3),e.Q6J("ngIf",r.selectedFilterText),e.xp6(1),e.Q6J("ngIf",t.length<1),e.xp6(1),e.Q6J("ngForOf",t)}}function _e(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"No Orders"),e.qZA())}function me(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2),e._uU(3,"Non Settled Orders"),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.loadNonSettledOrders())}),e._uU(5," REFRESH "),e.qZA()(),e.YNc(6,ue,13,12,"div",4),e.ALo(7,"async"),e.YNc(8,_e,2,0,"ng-template",null,5,e.W1O),e.BQk()}if(2&i){const t=e.MAs(9),r=e.oxw();e.xp6(6),e.Q6J("ngIf",e.lcZ(7,2,r.selectFilteredRecentOrders$))("ngIfElse",t)}}const ge=i=>({temp:i});let fe=(()=>{class i{constructor(t,r){this.store=t,this.dialog=r,this.selectRecentOrders$=this.store.select(s.selectRecentOrders),this.selectFilteredRecentOrders$=this.store.select(s.selectFilteredRecentOrders),this.selectorderCreatedUserNames$=this.store.select(s.selectorderCreatedUserNames),this.selectedFilterText="",this.selectFloors$=this.store.select(w.zs),this.selectedOrderDetailsOfSelectedOrder$=this.store.select(s.selectOrderDetailsOfSelectedOrder),this.store.dispatch((0,s.setFloorFilterForOrders)({filterTerm:""})),this.store.dispatch((0,w.ql)())}loadOrderDetail(t){console.log(t),this.dialog.closeAll(),this.store.dispatch((0,s.loadOrderDetails)({orderId:t.id}))}openOrderDetail(t){console.log("open dialog clicked"),this.loadOrderDetail(t),this.dialog.open(F,{height:"100vh",width:"100vw"})}openOrderDetailEdit(t){console.log("orderdetail edit opened"),this.loadOrderDetail(t),this.store.dispatch((0,v.mB)({user:{firstName:t.customer?.firstName??"firstName",lastName:t.customer?.lastName,userType:p.FW.ADMIN},tableId:1,customerId:t.customerId,existingOrderId:t.id})),this.dialog.open(A.z1,{height:"100%",width:"100%"})}loadNonSettledOrders(){this.store.dispatch((0,s.loadRecentOrders)()),this.store.dispatch((0,s.setFloorFilterForOrders)({filterTerm:""})),this.selectedFilterText=""}displayCustomerOrTableName(t){const r=t.customer;return`${r?.firstName} - ${r?.lastName}`}setFloorFilter(t){this.selectedFilterText=t,this.store.dispatch((0,s.setFloorFilterForOrders)({filterTerm:t}))}setUserNameFilter(t){this.setFloorFilter(`filterForCreatedUser$${t.name}`)}canEditOrder(t){return t.orderStatus!=p.iF.DELIVERED&&t.orderStatus!=p.iF.SERVED}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(f.yh),e.Y36(u.uw))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["hotel-orderapp-order-feature-order-list"]],standalone:!0,features:[e.jDz],decls:2,vars:5,consts:[[4,"ngIf"],[1,"font-bold","px-3","pt-2","w-full","bg-gray-100","flex"],[1,"flex-grow"],[1,"bg-gray-300","px-2","py-1","text-center","font-light","rounded-md","cursor-pointer",3,"click"],["class","py-2 bg-gray-100 p-2 h-full",4,"ngIf","ngIfElse"],["noOrder",""],[1,"py-2","bg-gray-100","p-2","h-full"],[1,"p-2","flex","flex-wrap","gap-3","bg-white","mb-2","max-h-24","overflow-y-scroll"],["class","bg-blue-200 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"bg-blue-200","cursor-pointer",3,"click"],[1,"px-2","py-1","text-center",3,"ngClass"],["class","bg-slate-300 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,""],["class","px-2 py-1 text-center bg-gray-700 text-white rounded-full cursor-pointer",3,"click",4,"ngIf"],["class","w-52",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"bg-slate-300","cursor-pointer",3,"click"],[1,"mr-2"],[1,"ml-1","font-semibold"],[1,"px-2","py-1","text-center","bg-gray-700","text-white","rounded-full","cursor-pointer",3,"click"],[1,"w-52"],[1,"rounded-md","bg-white","p-2","mb-2",3,"ngClass"],[1,"flex","w-full","flex-row","items-stretch"],[1,"font-bold","capitalize"],[1,"ml-2","border-l-2","pl-2","font-light"],[1,"flex","flex-row"],[1,"font-semibod"],[1,"font-semibold"],[1,"font-thin"],[1,"px-2"],[3,"order"],["class","h-7 rounded-md mr-2 bg-red-700 p-1 px-2 text-right text-sm text-white hover:bg-red-500 cursor-pointer",3,"click",4,"ngIf"],[1,"h-7","hidden","sm:inline-block","rounded-md","bg-green-700","p-1","px-2","text-right","text-sm","text-white","hover:bg-green-500","cursor-pointer",3,"click"],[1,"inline-block","h-7","sm:hidden","rounded-md","bg-green-700","p-1","px-2","text-right","text-sm","text-white","hover:bg-green-500","cursor-pointer",3,"click"],[1,"font-bold"],[1,"h-7","rounded-md","mr-2","bg-red-700","p-1","px-2","text-right","text-sm","text-white","hover:bg-red-500","cursor-pointer",3,"click"]],template:function(r,n){1&r&&(e.YNc(0,me,10,4,"ng-container",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.VKq(3,ge,e.lcZ(1,1,n.selectedOrderDetailsOfSelectedOrder$)))},dependencies:[c.ez,c.mk,c.sg,c.O5,c.Ov,u.Is,g.UU,b]})}return i})();var he=l(2939),xe=l(2651),k=l(1274);function ve(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.goToHomeDelivery())}),e.TgZ(1,"span"),e._uU(2,"Home Delivery"),e.qZA()()}}function Oe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"mat-toolbar",2)(2,"span",3),e._uU(3,"Orders"),e.qZA(),e._UZ(4,"span",4),e.TgZ(5,"button",5),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.goToHomeOrderPage())}),e._uU(6," TAKE NEW "),e.qZA(),e.TgZ(7,"button",6)(8,"div"),e.O4$(),e.TgZ(9,"svg",7)(10,"g"),e._UZ(11,"path",8),e.qZA()()()(),e.kcU(),e.TgZ(12,"mat-menu",null,9)(14,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.goToShellPage())}),e.TgZ(15,"span"),e._uU(16,"Home"),e.qZA()(),e.TgZ(17,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.goToHomeOrderPage())}),e.TgZ(18,"span"),e._uU(19,"New Order"),e.qZA()(),e.YNc(20,ve,3,0,"button",11),e.TgZ(21,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.goToOrderHistory())}),e.TgZ(22,"span"),e._uU(23,"My Orders"),e.qZA()(),e.TgZ(24,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.logout())}),e.TgZ(25,"span"),e._uU(26,"Logout"),e.qZA()()()(),e.TgZ(27,"div",12)(28,"div",13),e._UZ(29,"hotel-orderapp-order-feature-order-list"),e.qZA(),e.TgZ(30,"div",14),e._UZ(31,"hotel-orderapp-order-feature-order-detail"),e.qZA()()()}if(2&i){const t=o.ngIf,r=e.MAs(13),n=e.oxw();e.xp6(7),e.Q6J("matMenuTriggerFor",r),e.xp6(13),e.Q6J("ngIf",n.canAccessHomeDeliveryPage(t))}}let I=(()=>{class i{constructor(t,r,n){this.dialog=t,this.store=r,this.router=n,this.selectSignedUser$=this.store.select(x.JS),console.log("consturcur of order feature pagen"),this.store.dispatch((0,s.loadRecentOrders)())}ngOnDestroy(){this.store.dispatch((0,s.clearTheOrderDetails)())}canAccessHomeDeliveryPage(t){return t.isHomeDeliveryUser||t.isCashier}logout(){this.store.dispatch((0,x.kS)())}goToShellPage(){this.router.navigate(["shell"])}goToHomeOrderPage(){this.router.navigate(["shell/home"])}goToHomeDelivery(){this.router.navigate(["shell/homedelivery"])}goToOrderHistory(){this.router.navigate(["shell/history"])}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(u.uw),e.Y36(f.yh),e.Y36(O.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["hotel-orderapp-order-feature-page"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[["class","h-screen",4,"ngIf"],[1,"h-screen"],["color","primary",1,"flex"],[1,"pl-2"],[1,"flex-grow"],[1,"px-2","py-1","bg-pink-400","font-bold","rounded-md","text-base","mr-3",3,"click"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["version","1.1","id","Layer_1","x","0px","y","0px","width","13px","height","20px","viewBox","0 0 29.957 122.88","enable-background","new 0 0 29.957 122.88",0,"xml","space","preserve","fill","#fefefe"],["fill-rule","evenodd","clip-rule","evenodd","d","M14.978,0c8.27,0,14.979,6.708,14.979,14.979c0,8.27-6.709,14.976-14.979,14.976 C6.708,29.954,0,23.249,0,14.979C0,6.708,6.708,0,14.978,0L14.978,0z M14.978,92.926c8.27,0,14.979,6.708,14.979,14.979 s-6.709,14.976-14.979,14.976C6.708,122.88,0,116.175,0,107.904S6.708,92.926,14.978,92.926L14.978,92.926z M14.978,46.463 c8.27,0,14.979,6.708,14.979,14.979s-6.709,14.978-14.979,14.978C6.708,76.419,0,69.712,0,61.441S6.708,46.463,14.978,46.463 L14.978,46.463z"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"sm:grid","sm:gap-2","sm:grid-cols-5","mx-auto","h-full"],[1,"sm:col-span-2","overflow-y-auto"],[1,"sm:col-span-3","sm:block","hidden"]],template:function(r,n){1&r&&(e.YNc(0,Oe,32,2,"div",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,n.selectSignedUser$))},dependencies:[c.ez,c.O5,c.Ov,O.Bz,u.Is,he.ZX,xe.SJ,k.g0,k.Ye,y.Ps,m.Tx,m.VK,m.OP,m.p6,fe,F]})}return i})();const Te=[{path:"",component:I,providers:[]},{path:"edit",component:A.z1}]}}]);