"use strict";(self.webpackChunkorderapp=self.webpackChunkorderapp||[]).push([[981],{2774:(u,m,i)=>{i.d(m,{T:()=>a});var _=i(1413),c=i(8141),I=i(152),d=i(5964),l=i(6354),o=i(7035);class a{_letterKeyStream=new _.B;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new _.B;selectedItem=this._selectedItem;constructor(n,e){const t="number"==typeof e?.debounceInterval?e.debounceInterval:200;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(n),this._setupKeyHandler(t)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){const e=n.keyCode;n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=o.A&&e<=o.Z||e>=o.b&&e<=o.N)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe((0,c.M)(e=>this._pressedLetters.push(e)),(0,I.B)(n),(0,d.p)(()=>this._pressedLetters.length>0),(0,l.T)(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let t=1;t<this._items.length+1;t++){const r=this._items[(this._selectedItemIndex+t)%this._items.length];if(!this._skipPredicateFn?.(r)&&0===r.getLabel?.().toLocaleUpperCase().trim().indexOf(e)){this._selectedItem.next(r);break}}this._pressedLetters=[]})}}},3981:(u,m,i)=>{i.d(m,{F:()=>c});var _=i(8070);class c extends _.L{_origin="program";setFocusOrigin(d){return this._origin=d,this}setActiveItem(d){super.setActiveItem(d),this.activeItem&&this.activeItem.focus(this._origin)}}},8070:(u,m,i)=>{i.d(m,{L:()=>y});var _=i(2615),c=i(3664),I=i(3597),d=i(8359),l=i(1413),o=i(2774),p=i(7336),a=i(7035);class y{_items;_activeItemIndex=(0,_.vPA)(-1);_activeItem=(0,_.vPA)(null);_wrap=!1;_typeaheadSubscription=d.yU.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof c.rOR?this._itemChangesSubscription=e.changes.subscribe(s=>this._itemsChanged(s.toArray())):(0,_.Hps)(e)&&(this._effectRef=(0,I.QZ)(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new l.B;change=new l.B;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();const t=this._getItemsArray();return this._typeahead=new o.T(t,{debounceInterval:"number"==typeof e?e:void 0,skipPredicate:s=>this._skipPredicateFn(s)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(s=>{this.setActiveItem(s)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex())}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(h=>!e[h]||this._allowedModifierKeys.indexOf(h)>-1);switch(t){case a.T:return void this.tabOut.next();case a.D:if(this._vertical&&r){this.setNextItemActive();break}return;case a.U:if(this._vertical&&r){this.setPreviousItemActive();break}return;case a.R:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case a.L:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case a.H:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case a.E:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case a.a:if(this._pageUpAndDown.enabled&&r){const h=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(h>0?h:0,1);break}return;case a.P:if(this._pageUpAndDown.enabled&&r){const h=this._activeItemIndex()+this._pageUpAndDown.delta,v=this._getItemsArray().length;this._setActiveItemByIndex(h<v?h:v-1,-1);break}return;default:return void((r||(0,p.rp)(e,"shiftKey"))&&this._typeahead?.handleKey(e))}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),s="number"==typeof e?e:t.indexOf(e);this._activeItem.set(t[s]??null),this._activeItemIndex.set(s),this._typeahead?.setCurrentSelectedItemIndex(s)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let s=1;s<=t.length;s++){const r=(this._activeItemIndex()+e*s+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex()+e,e)}_setActiveItemByIndex(e,t){const s=this._getItemsArray();if(s[e]){for(;this._skipPredicateFn(s[e]);)if(!s[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return(0,_.Hps)(this._items)?this._items():this._items instanceof c.rOR?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);const t=this._activeItem();if(t){const s=e.indexOf(t);s>-1&&s!==this._activeItemIndex()&&(this._activeItemIndex.set(s),this._typeahead?.setCurrentSelectedItemIndex(s))}}}}}]);